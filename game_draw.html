<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>🎨 Loppy 灵魂画手</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.4.7/peerjs.min.js"></script>
    <style>
        @font-face { font-family: 'MyCutieFont'; src: url('https://files.catbox.moe/cweam3.ttf') format('truetype'); font-display: swap; }
        * { margin: 0; padding: 0; box-sizing: border-box; touch-action: none; -webkit-tap-highlight-color: transparent; }
        
        body { font-family: 'MyCutieFont', sans-serif; background: linear-gradient(135deg, #fff1eb 0%, #ace0f9 100%); height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* 顶部 */
        .top-bar { padding: 10px; background: rgba(255,255,255,0.8); display: flex; justify-content: space-between; align-items: center; border-bottom: 2px dashed #ff9a9e; z-index: 100; }
        .back-btn { text-decoration: none; font-size: 20px; cursor: pointer; }
        .game-info { font-size: 16px; color: #ff6b81; font-weight: bold; }

        /* 主区域 */
        .main-area { flex: 1; display: flex; position: relative; overflow: hidden; }
        
        /* 侧边栏 */
        .sidebar { width: 80px; background: rgba(255,255,255,0.5); border-right: 2px dashed #fff; overflow-y: auto; padding: 5px; display: flex; flex-direction: column; gap: 5px; }
        .player-card { background: #fff; border-radius: 10px; padding: 5px; text-align: center; border: 2px solid #fff; transition: 0.3s; opacity: 0.7; }
        .player-card.active { border-color: #ff9a9e; transform: scale(1.05); opacity: 1; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .p-name { font-size: 10px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .p-score { font-size: 12px; color: #ff7675; font-weight: bold; }

        /* 画板容器 */
        .canvas-container { flex: 1; position: relative; background: #fff; margin: 10px; border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 4px solid #a29bfe; display: flex; justify-content: center; align-items: center; overflow: hidden; }
        canvas { touch-action: none; width: 100%; height: 100%; border-radius: 15px; }

        /* 遮罩层 (题目/等待/结果) */
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.98); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 20; display: none; text-align: center; padding: 20px; }
        .overlay-title { font-size: 20px; color: #a29bfe; margin-bottom: 10px; }
        .overlay-text { font-size: 40px; color: #ff9a9e; font-weight: bold; margin-bottom: 20px; text-shadow: 2px 2px 0 #fff; }
        
        /* 接龙图片预览区 */
        .relay-img-preview { max-width: 80%; max-height: 50%; border: 4px solid #333; border-radius: 10px; margin-bottom: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }

        /* 聊天区 */
        .chat-area { position: absolute; bottom: 10px; right: 10px; width: 200px; height: 150px; background: rgba(255,255,255,0.8); border-radius: 15px; border: 2px solid #fff; display: flex; flex-direction: column; overflow: hidden; pointer-events: none; }
        .chat-msgs { flex: 1; overflow-y: auto; padding: 5px; font-size: 12px; pointer-events: auto; }
        .chat-msg { margin-bottom: 2px; }
        .chat-msg.sys { color: #a29bfe; font-style: italic; }
        .chat-input-box { display: flex; padding: 5px; background: #fff; pointer-events: auto; }
        .chat-ipt { flex: 1; border: 1px solid #ddd; border-radius: 5px; padding: 3px; outline: none; }

        /* 工具栏 */
        .tools-bar { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); background: #fff; padding: 10px; border-radius: 50px; display: none; gap: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); z-index: 50; }
        .color-btn { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; }
        .color-btn.active { transform: scale(1.2); border-color: #555; }
        
        /* 弹窗 */
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: flex; justify-content: center; align-items: center; z-index: 1000; backdrop-filter: blur(5px); }
        .modal-box { background: #fff; padding: 30px; border-radius: 30px; width: 90%; max-width: 400px; text-align: center; border: 4px solid #ffb7c5; }
        
        /* 按钮样式 */
        .btn { padding: 10px 20px; border-radius: 20px; border: none; font-size: 14px; color: white; cursor: pointer; margin: 5px; font-family: inherit; transition: 0.2s; }
        .btn:active { transform: scale(0.95); }
        .btn-pink { background: #ff9a9e; }
        .btn-blue { background: #74b9ff; }
        
        /* 题库选择按钮 */
        .cat-btn { background: #eee; color: #666; border: 2px solid transparent; width: 80px; }
        .cat-btn.active { border-color: #ff9a9e; background: #fff0f5; color: #ff6b81; font-weight: bold; }
        
        .ipt { width: 100%; padding: 10px; border-radius: 10px; border: 2px solid #ddd; margin-bottom: 10px; text-align: center; }

        /* 结果展示 */
        .result-scroll { max-height: 60vh; overflow-y: auto; width: 100%; text-align: left; }
        .result-item { border-bottom: 1px dashed #ddd; padding: 10px; }
        .result-img { max-width: 100px; border: 1px solid #ccc; vertical-align: middle; }
    </style>
</head>
<body>

    <div class="top-bar">
        <a href="game_loppy.html" class="back-btn">🔙</a>
        <div class="game-info" id="statusText">等待开始...</div>
        <div></div>
    </div>

    <div class="main-area">
        <div class="sidebar" id="playerList"></div>

        <div class="canvas-container">
            <canvas id="gameCanvas"></canvas>

            <div class="overlay" id="gameOverlay">
                <div class="overlay-title" id="overlayTitle">准备</div>
                
                <div id="wordDisplay" style="display:none;">
                    <div class="overlay-text" id="wordText">题目</div>
                    <button class="btn btn-pink" onclick="startDrawing()">🖌️ 开始画</button>
                    <button class="btn btn-blue" onclick="changeWord()">🔄 换一题</button>
                </div>

                <div id="imgDisplay" style="display:none; flex-direction:column; align-items:center;">
                    <img id="relayImg" class="relay-img-preview" src="">
                    <input type="text" class="ipt" id="relayGuessInput" placeholder="你觉得这是什么？">
                    <button class="btn btn-pink" onclick="submitRelayGuess()">✅ 提交猜测</button>
                </div>

                <div id="waitDisplay" style="display:none;">
                    <div class="overlay-text" style="font-size:20px; color:#aaa;">等待其他人...</div>
                </div>

                <div id="hostControls" style="display:none; flex-direction:column; gap:10px; width:80%;">
                    
                    <div style="background:#f9f9f9; padding:10px; border-radius:15px; margin-bottom:10px;">
                        <div style="font-size:12px; color:#888; margin-bottom:5px;">① 选择题库风格</div>
                        <div style="display:flex; justify-content:center; gap:5px;">
                            <button class="btn cat-btn active" id="btnNormal" onclick="selectCategory('normal')">🌈普通</button>
                            <button class="btn cat-btn" id="btnPure" onclick="selectCategory('pure')">🌸纯爱</button>
                            <button class="btn cat-btn" id="btnSpicy" onclick="selectCategory('spicy')">💋刺激</button>
                        </div>
                    </div>

                    <div style="background:#f9f9f9; padding:10px; border-radius:15px;">
                        <div style="font-size:12px; color:#888; margin-bottom:5px;">② 选择玩法模式</div>
                        <button class="btn btn-blue" style="width:100%" onclick="startGame('classic')">🎨 竞速猜画 (抢答)</button>
                        <button class="btn btn-pink" style="width:100%" onclick="startGame('relay')">🧩 灵魂接龙 (传话筒)</button>
                    </div>

                </div>

                <div id="resultDisplay" style="display:none; width:100%;">
                    <div class="result-scroll" id="resultList"></div>
                    <button class="btn btn-pink" onclick="document.getElementById('resultDisplay').style.display='none'; if(isHost) document.getElementById('hostControls').style.display='flex';">🔙以此类推下一位</button>
                </div>
            </div>
        </div>

        <div class="chat-area">
            <div class="chat-msgs" id="chatList"></div>
            <div class="chat-input-box" id="chatInputArea">
                <input type="text" class="ipt chat-ipt" id="chatInput" placeholder="聊天/竞速猜题..." onkeydown="if(event.keyCode==13) sendChat()">
            </div>
        </div>
    </div>

    <div class="tools-bar" id="toolBar">
        <div class="color-btn" style="background:#000" onclick="setColor('#000')"></div>
        <div class="color-btn" style="background:#ff7675" onclick="setColor('#ff7675')"></div>
        <div class="color-btn" style="background:#fdcb6e" onclick="setColor('#fdcb6e')"></div>
        <div class="color-btn" style="background:#55efc4" onclick="setColor('#55efc4')"></div>
        <div class="color-btn" style="background:#74b9ff" onclick="setColor('#74b9ff')"></div>
        <button class="btn" style="padding:5px 10px; background:#ddd; color:#555;" onclick="clearCanvas()">🗑️</button>
        <button class="btn btn-blue" onclick="finishDrawing()">✅ 画好了</button>
    </div>

    <div class="modal" id="loginModal">
        <div class="modal-box">
            <h2 style="color:#ff9a9e;">🎨 灵魂画手</h2>
            <input type="text" class="ipt" id="myName" placeholder="你的名字">
            <div id="lobbyBtns">
                <button class="btn btn-pink" onclick="createRoom()">👑 我是房主</button>
                <div style="margin:5px; color:#ccc;">- 或 -</div>
                <input type="text" class="ipt" id="hostIdInput" placeholder="房主ID">
                <button class="btn btn-blue" onclick="joinRoom()">🚀 加入房间</button>
            </div>
            <div id="hostWait" style="display:none;">
                <p>房号: <span id="myRoomId" style="color:#ff6b81; font-weight:bold; cursor:pointer;" onclick="copyId()">...</span></p>
                <p>人数: <span id="waitCount">1</span></p>
                <button class="btn btn-pink" onclick="enterGame()">进入大厅</button>
            </div>
        </div>
    </div>

    <script>
        // ================= 题库配置 =================
        const WORD_DB = {
            normal: [
"猫", "狗", "猪", "鸭", "鸡", "鹅", "牛", "羊", "马", "驴", "狼", "熊", "鹿", "虎", "豹", "象", "蛇", "鼠", "兔", "猴", "鱼", "虾", "蟹", "龟", "鳖", "蝉", "蚕", "蛾", "蚊", "蝇", "蜂", "蚁", "鹭", "鹰", "雕", "鸮", "鸽", "燕", "雀", "鹤", "鲸", "鲨", "豚", "猪", "獾", "貂", "獭", "狐", "狸", "猬", "狮子", "老虎", "熊猫", "考拉", "袋鼠", "斑马", "长颈鹿", "河马", "犀牛", "大象", "骆驼", "羊驼", "松鼠", "兔子", "刺猬", "老鼠", "仓鼠", "土拨鼠", "海豚", "鲸鱼", "海豹", "海狮", "海象", "企鹅", "北极熊", "鳄鱼", "乌龟", "蜥蜴", "恐龙", "青蛙", "蟾蜍", "蝾螈", "章鱼", "鱿鱼", "水母", "海星", "海马", "珊瑚", "贝壳", "螃蟹", "龙虾", "皮皮虾", "金鱼", "鲤鱼", "鲶鱼", "草鱼", "带鱼", "黄鱼", "比目鱼", "河豚", "蝴蝶", "蜻蜓", "蜜蜂", "蚂蚁", "蜘蛛", "蝎子", "蜈蚣", "蟑螂", "苍蝇", "蚊子", "跳蚤", "虱子", "臭虫", "瓢虫", "金龟子", "独角仙", "螳螂", "蟋蟀", "蚂蚱", "知了", "萤火虫", "蜗牛", "蛞蝓", "蚯蚓", "水蛭", "蝙蝠", "猫头鹰", "啄木鸟", "鹦鹉", "孔雀", "天鹅", "大雁", "火烈鸟", "鹈鹕", "海鸥", "信鸽", "麻雀", "喜鹊", "乌鸦", "杜鹃", "画眉", "百灵", "鸵鸟", "鸸鹋", "几维鸟", "鸭嘴兽", "穿山甲", "食蚁兽", "树懒", "浣熊", "小熊猫", "金丝猴", "黑猩猩", "大猩猩", "长臂猿", "狒狒", "狐猴", "藏羚羊", "麋鹿", "驯鹿", "野猪", "豪猪", "红腹锦鸡", "丹顶鹤", "朱鹮", "白鹭", "鸳鸯", "中华鲟", "扬子鳄", "娃娃鱼", "哈士奇", "金毛", "泰迪", "柯基", "柴犬", "斗牛犬", "藏獒", "波斯猫", "布偶猫", "橘猫", "黑猫警长", "加菲猫", "史努比", "米老鼠", "唐老鸭", "维尼熊", "跳跳虎", "辛巴", "彭彭", "丁满", "朱迪", "尼克", "功夫熊猫", "孙悟空", "猪八戒", "沙和尚", "唐僧", "白龙马", "哪吒", "葫芦娃", "黑猫", "舒克", "贝塔", "皮卡丘", "妙蛙种子", "小火龙", "杰尼龟", "可达鸭", "胖丁", "喵喵", "哆啦A梦", "大雄", "静香", "胖虎", "小夫", "路飞", "索隆", "乔巴", "鸣人", "佐助", "卡卡西", "柯南", "工藤新一", "小兰", "毛利小五郎", "蜡笔小新", "樱桃小丸子", "海绵宝宝", "派大星", "章鱼哥", "蟹老板", "痞老板", "马里奥", "路易吉", "库巴", "桃子公主", "耀西", "塞尔达", "林克", "索尼克", "吃豆人", "愤怒的小鸟", "植物大战僵尸", "我的世界", "苦力怕", "史蒂夫", "王者荣耀", "亚瑟", "安琪拉", "鲁班七号", "李白", "韩信", "貂蝉", "吕布", "赵云", "关羽", "张飞", "刘备", "诸葛亮", "曹操", "周瑜", "小乔", "大乔", "孙策", "孙权", "司马懿", "王昭君", "西施", "杨玉环", "花木兰", "兰陵王", "程咬金", "狄仁杰", "李元芳", "扁鹊", "蔡文姬", "庄周", "墨子", "老夫子", "达摩", "姜子牙", "杨戬", "太乙真人", "东皇太一", "干将莫邪", "鬼谷子", "百里守约", "百里玄策", "苏烈", "梦奇", "公孙离", "杨玉环", "裴擒虎", "弈星", "狂铁", "米莱狄", "元歌", "孙悟空", "露娜", "后羿", "嫦娥", "猪八戒", "盘古", "女娲", "伏羲", "神农", "黄帝", "炎帝", "大禹", "夸父", "精卫", "愚公", "后羿射日", "嫦娥奔月", "吴刚伐桂", "牛郎织女", "孟姜女", "白蛇传", "许仙", "白素贞", "小青", "法海", "梁山伯", "祝英台", "罗密欧", "朱丽叶", "哈利波特", "罗恩", "赫敏", "伏地魔", "邓布利多", "格格巫", "蓝精灵", "阿凡提", "三毛", "流浪地球", "奥特曼", "怪兽", "哥斯拉", "金刚", "变形金刚", "擎天柱", "大黄蜂", "威震天", "钢铁侠", "美国队长", "雷神", "绿巨人", "黑寡妇", "鹰眼", "蜘蛛侠", "奇异博士", "黑豹", "蚁人", "灭霸", "洛基", "死侍", "金刚狼", "X教授", "万磁王", "超人", "蝙蝠侠", "神奇女侠", "海王", "闪电侠", "钢骨", "绿灯侠", "小丑", "哈莉奎茵", "毒液", "苹果", "香蕉", "梨", "桃子", "李子", "杏", "枣", "葡萄", "西瓜", "哈密瓜", "甜瓜", "柠檬", "橘子", "橙子", "柚子", "草莓", "蓝莓", "树莓", "桑葚", "樱桃", "芒果", "菠萝", "椰子", "榴莲", "山竹", "火龙果", "猕猴桃", "石榴", "无花果", "荔枝", "龙眼", "枇杷", "杨梅", "柿子", "甘蔗", "百香果", "牛油果", "莲雾", "杨桃", "番石榴", "木瓜", "黑莓", "蔓越莓", "西红柿", "黄瓜", "茄子", "辣椒", "土豆", "红薯", "紫薯", "山药", "芋头", "莲藕", "萝卜", "胡萝卜", "洋葱", "大葱", "大蒜", "生姜", "香菜", "韭菜", "芹菜", "菠菜", "白菜", "卷心菜", "生菜", "油麦菜", "西兰花", "花菜", "芦笋", "竹笋", "冬瓜", "南瓜", "丝瓜", "苦瓜", "西葫芦", "豆角", "毛豆", "豌豆", "蚕豆", "扁豆", "黄豆", "绿豆", "红豆", "黑豆", "玉米", "小麦", "水稻", "高粱", "燕麦", "荞麦", "花生", "瓜子", "核桃", "杏仁", "腰果", "开心果", "碧根果", "夏威夷果", "松子", "榛子", "板栗", "白果", "米饭", "面条", "馒头", "包子", "饺子", "馄饨", "汤圆", "粽子", "月饼", "年糕", "油条", "豆浆", "粥", "炒饭", "炒面", "凉皮", "肉夹馍", "羊肉泡馍", "煎饼果子", "鸡蛋灌饼", "手抓饼", "烤冷面", "臭豆腐", "麻辣烫", "火锅", "串串香", "冒菜", "钵钵鸡", "麻辣香锅", "烤鱼", "酸菜鱼", "水煮鱼", "水煮肉片", "回锅肉", "鱼香肉丝", "宫保鸡丁", "麻婆豆腐", "夫妻肺片", "口水鸡", "辣子鸡", "东坡肉", "红烧肉", "糖醋排骨", "粉蒸肉", "梅菜扣肉", "叫花鸡", "西湖醋鱼", "龙井虾仁", "大煮干丝", "狮子头", "松鼠桂鱼", "阳春面", "热干面", "炸酱面", "刀削面", "兰州拉面", "过桥米线", "螺蛳粉", "桂林米粉", "沙县小吃", "肯德基", "麦当劳", "必胜客", "汉堡", "薯条", "炸鸡", "可乐", "雪碧", "芬达", "美年达", "七喜", "百事可乐", "可口可乐", "红牛", "脉动", "尖叫", "农夫山泉", "怡宝", "百岁山", "康师傅", "统一", "娃哈哈", "旺仔牛奶", "AD钙奶", "营养快线", "爽歪歪", "优酸乳", "酸酸乳", "纯牛奶", "酸奶", "奶酪", "黄油", "奶油", "冰淇淋", "雪糕", "棒冰", "圣代", "麦旋风", "甜筒", "蛋挞", "泡芙", "甜甜圈", "马卡龙", "提拉米苏", "黑森林蛋糕", "芝士蛋糕", "慕斯蛋糕", "戚风蛋糕", "海绵蛋糕", "布朗尼", "曲奇", "饼干", "威化", "薯片", "虾条", "海苔", "果冻", "布丁", "龟苓膏", "双皮奶", "烧仙草", "珍珠奶茶", "波霸奶茶", "焦糖奶茶", "红豆奶茶", "椰果奶茶", "柠檬茶", "柚子茶", "水果茶", "奶盖茶", "芝士茶", "乌龙茶", "绿茶", "红茶", "普洱茶", "铁观音", "大红袍", "龙井", "碧螺春", "毛尖", "花茶", "菊花茶", "茉莉花茶", "玫瑰花茶", "咖啡", "拿铁", "摩卡", "卡布奇诺", "美式咖啡", "浓缩咖啡", "玛奇朵", "星冰乐", "啤酒", "白酒", "红酒", "黄酒", "米酒", "清酒", "烧酒", "伏特加", "威士忌", "白兰地", "朗姆酒", "金酒", "龙舌兰", "鸡尾酒", "香槟", "二锅头", "茅台", "五粮液", "手机", "电脑", "平板", "相机", "耳机", "音响", "麦克风", "键盘", "鼠标", "显示器", "主机", "笔记本", "充电器", "数据线", "充电宝", "电池", "插座", "插头", "开关", "灯泡", "台灯", "吊灯", "吸顶灯", "落地灯", "手电筒", "蜡烛", "火柴", "打火机", "电视", "冰箱", "洗衣机", "空调", "风扇", "暖气", "热水器", "微波炉", "烤箱", "电饭煲", "高压锅", "电磁炉", "油烟机", "洗碗机", "消毒柜", "榨汁机", "豆浆机", "咖啡机", "面包机", "酸奶机", "空气炸锅", "电饼铛", "煮蛋器", "加湿器", "除湿机", "净化器", "吸尘器", "扫地机", "拖把", "扫把", "簸箕", "垃圾桶", "垃圾袋", "抹布", "钢丝球", "洗洁精", "洗衣液", "洗衣粉", "肥皂", "香皂", "洗手液", "沐浴露", "洗发水", "护发素", "洗面奶", "牙膏", "牙刷", "牙杯", "毛巾", "浴巾", "澡巾", "浴球", "浴帽", "吹风机", "卷发棒", "直发器", "理发器", "剃须刀", "刮胡刀", "眉刀", "指甲刀", "剪刀", "梳子", "镜子", "化妆棉", "卸妆水", "爽肤水", "乳液", "面霜", "眼霜", "精华", "面膜", "防晒霜", "隔离霜", "粉底液", "气垫", "粉饼", "散粉", "遮瑕", "高光", "修容", "腮红", "眼影", "眼线", "睫毛膏", "眉笔", "口红", "唇釉", "唇膏", "香水", "指甲油", "发胶", "发蜡", "衣服", "裤子", "裙子", "衬衫", "T恤", "卫衣", "毛衣", "外套", "夹克", "大衣", "风衣", "棉袄", "羽绒服", "马甲", "西装", "礼服", "婚纱", "旗袍", "汉服", "和服", "牛仔裤", "休闲裤", "运动裤", "短裤", "内裤", "秋裤", "袜子", "丝袜", "鞋子", "运动鞋", "皮鞋", "高跟鞋", "凉鞋", "拖鞋", "靴子", "雨鞋", "帽子", "围巾", "手套", "领带", "领结", "皮带", "腰带", "眼镜", "墨镜", "手表", "项链", "耳环", "戒指", "手镯", "手链", "脚链", "发夹", "皮筋", "发箍", "发带", "书包", "背包", "挎包", "手提包", "钱包", "卡包", "零钱包", "行李箱", "雨伞", "雨衣", "拐杖", "轮椅", "担架", "听诊器", "针筒", "药丸", "胶囊", "输液", "绷带", "创可贴", "口罩", "体温计", "血压计", "体重秤", "尺子", "圆规", "三角板", "量角器", "铅笔", "钢笔", "圆珠笔", "中性笔", "马克笔", "荧光笔", "蜡笔", "水彩笔", "毛笔", "墨水", "砚台", "宣纸", "橡皮", "涂改液", "修正带", "削笔刀", "文具盒", "笔袋", "书本", "本子", "作业本", "日记本", "笔记本", "便利贴", "胶水", "胶带", "双面胶", "订书机", "订书钉", "回形针", "大头针", "图钉", "文件夹", "档案袋", "剪纸", "折纸", "贺卡", "信封", "邮票", "日历", "台历", "挂历", "相框", "相册", "海报", "地图", "地球仪", "望远镜", "显微镜", "放大镜", "指南针", "算盘", "计算器", "足球", "篮球", "排球", "羽毛球", "乒乓球", "网球", "高尔夫", "台球", "保龄球", "棒球", "垒球", "曲棍球", "冰球", "橄榄球", "板球", "壁球", "毽子", "跳绳", "呼啦圈", "瑜伽垫", "跑步机", "哑铃", "杠铃", "沙袋", "拳套", "护膝", "护腕", "头盔", "滑板", "轮滑", "溜冰", "滑雪", "游泳", "跳水", "冲浪", "潜水", "划船", "皮划艇", "帆船", "龙舟", "赛车", "自行车", "摩托车", "电动车", "三轮车", "汽车", "公交车", "出租车", "警车", "救护车", "消防车", "卡车", "货车", "火车", "高铁", "地铁", "轻轨", "飞机", "直升机", "飞船", "火箭", "卫星", "飞碟", "热气球", "降落伞", "滑翔伞", "风筝", "秋千", "滑梯", "跷跷板", "旋转木马", "过山车", "摩天轮", "海盗船", "碰碰车", "鬼屋", "迷宫", "城堡", "宫殿", "塔", "桥", "路", "墙", "门", "窗", "屋顶", "烟囱", "井", "田", "山", "河", "湖", "海", "洋", "岛", "滩", "泉", "瀑布", "沙漠", "草原", "森林", "沼泽", "洞穴", "悬崖", "峡谷", "冰川", "火山", "地震", "海啸", "台风", "龙卷风", "雷电", "暴雨", "暴雪", "冰雹", "雾", "霾", "彩虹", "极光", "日出", "日落", "星星", "月亮", "太阳", "云", "风", "雨", "雪", "霜", "露", "雾凇", "冰雕", "雪人", "打雪仗", "堆雪人", "滑雪", "溜冰", "冬泳", "温泉", "桑拿", "按摩", "拔罐", "针灸", "刮痧", "足疗", "修脚", "采耳", "理发", "染发", "烫发", "美容", "美甲", "纹身", "穿孔", "整容", "化妆", "卸妆", "洗脸", "刷牙", "漱口", "洗澡", "搓澡", "泡澡", "淋浴", "洗头", "吹头", "梳头", "扎辫子", "剪指甲", "掏耳朵", "擤鼻涕", "打喷嚏", "咳嗽", "打嗝", "放屁", "拉屎", "撒尿", "睡觉", "打呼噜", "磨牙", "说梦话", "梦游", "起床", "穿衣", "叠被子", "铺床", "扫地", "拖地", "擦窗户", "洗衣服", "晾衣服", "收衣服", "叠衣服", "熨衣服", "做饭", "洗菜", "切菜", "炒菜", "煮饭", "煲汤", "洗碗", "刷锅", "吃饭", "喝水", "喝汤", "喝酒", "喝茶", "吃面", "吃肉", "吃鱼", "吃虾", "吃蟹", "啃骨头", "剥皮", "去籽", "吐核", "剔牙", "漱口", "擦嘴", "吸烟", "点火", "灭火", "买菜", "逛街", "购物", "试穿", "砍价", "结账", "排队", "插队", "挤公交", "打车", "开车", "停车", "倒车", "洗车", "修车", "加油", "充电", "过马路", "闯红灯", "散步", "跑步", "慢跑", "快跑", "冲刺", "接力", "跳高", "跳远", "撑杆跳", "铅球", "标枪", "铁饼", "链球", "射击", "射箭", "举重", "摔跤", "柔道", "跆拳道", "空手道", "拳击", "散打", "武术", "太极", "气功", "瑜伽", "普拉提", "健美操", "广场舞", "街舞", "芭蕾", "拉丁", "探戈", "华尔兹", "迪斯科", "摇滚", "爵士", "嘻哈", "民谣", "古典", "流行", "唱歌", "跳舞", "弹琴", "画画", "书法", "下棋", "钓鱼", "养花", "遛鸟", "喂鱼", "逗猫", "遛狗", "看书", "看报", "看电视", "看电影", "看戏", "听广播", "听音乐", "上网", "聊天", "游戏", "追剧", "刷视频", "直播", "自拍", "拍照", "摄影", "录像", "剪辑", "编程", "设计", "写作", "翻译", "演讲", "辩论", "谈判", "开会", "上班", "下班", "加班", "出差", "请假", "迟到", "早退", "旷工", "辞职", "失业", "找工作", "面试", "入职", "升职", "加薪", "降职", "降薪", "裁员", "退休", "上学", "放学", "逃学", "复读", "留级", "跳级", "转学", "退学", "毕业", "考试", "监考", "作弊", "挂科", "补考", "重修", "保研", "考研", "读博", "留学", "军训", "春游", "秋游", "夏令营", "冬令营", "补习班", "兴趣班", "家教", "老师", "学生", "校长", "教导主任", "班主任", "课代表", "学霸", "学渣", "校花", "校草", "同桌", "室友", "医生", "护士", "病人", "院长", "警察", "小偷", "强盗", "土匪", "绑匪", "骗子", "杀手", "侦探", "法官", "律师", "检察官", "狱警", "囚犯", "军人", "士兵", "将军", "司令", "元帅", "逃兵", "特种兵", "狙击手", "飞行员", "宇航员", "船长", "水手", "海盗", "司机", "售票员", "乘务员", "空姐", "列车长", "站长", "厨师", "服务员", "老板", "经理", "秘书", "会计", "出纳", "前台", "保安", "保洁", "保姆", "月嫂", "快递员", "外卖员", "邮递员", "环卫工", "建筑工", "木工", "瓦工", "电工", "水管工", "油漆工", "修理工", "裁缝", "理发师", "化妆师", "摄影师", "记者", "编辑", "作家", "诗人", "画家", "音乐家", "舞蹈家", "演员", "导演", "编剧", "制片人", "主持人", "模特", "网红", "主播", "科学家", "发明家", "探险家", "考古学家", "历史学家", "哲学家", "数学家", "物理学家", "化学家", "生物学家", "天文学家", "地理学家", "心理学家", "经济学家", "政治家", "外交官", "总统", "总理", "国王", "女王", "王子", "公主", "皇帝", "皇后", "太监", "宫女", "大臣", "将军", "乞丐", "流浪汉", "富翁", "土豪", "暴发户", "慈善家", "志愿者", "义工", "和尚", "尼姑", "道士", "牧师", "神父", "修女", "教皇", "耶稣", "佛祖", "观音", "玉帝", "王母", "阎王", "黑白无常", "孟婆", "僵尸", "吸血鬼", "狼人", "木乃伊", "幽灵", "鬼魂", "恶魔", "天使", "精灵", "矮人", "巨人", "地精", "兽人", "龙", "凤", "麒麟", "貔貅", "饕餮", "混沌", "穷奇", "梼杌", "九尾狐", "精卫填海", "夸父逐日", "女娲补天", "后羿射日", "嫦娥奔月", "大禹治水", "愚公移山", "掩耳盗铃", "刻舟求剑", "守株待兔", "亡羊补牢", "画蛇添足", "杯弓蛇影", "狐假虎威", "井底之蛙", "盲人摸象", "对牛弹琴", "拔苗助长", "闻鸡起舞", "悬梁刺股", "凿壁偷光", "程门立雪", "三顾茅庐", "草船借箭", "负荆请罪", "完璧归赵", "卧薪尝胆", "纸上谈兵", "指鹿为马", "望梅止渴", "画饼充饥", "南辕北辙", "东施效颦", "邯郸学步", "滥竽充数", "自相矛盾", "杞人忧天", "叶公好龙", "黔驴技穷", "惊弓之鸟", "老马识途", "一鸣惊人", "一箭双雕", "一石二鸟", "一举两得", "一帆风顺", "一刀两断", "一见钟情", "一诺千金", "一言九鼎", "一败涂地", "一无所有", "一窍不通", "一心一意", "三心二意", "五体投地", "六神无主", "七上八下", "九死一生", "十全十美", "百发百中", "千军万马", "万众一心", "人山人海", "车水马龙", "门可罗雀", "鸦雀无声", "震耳欲聋", "欢天喜地", "哭笑不得", "垂头丧气", "兴高采烈", "手舞足蹈", "眉飞色舞", "目瞪口呆", "大惊小怪", "莫名其妙", "无可奈何", "不约而同", "小心翼翼", "全神贯注", "聚精会神", "一丝不苟", "力不从心", "心不在焉", "心满意足", "心花怒放", "心急如焚", "心惊肉跳", "心血来潮", "喜出望外", "怒发冲冠", "哀鸿遍野", "乐极生悲", "生离死别", "悲欢离合", "酸甜苦辣", "风雨同舟", "同甘共苦", "雪中送炭", "锦上添花", "落井下石", "趁火打劫", "浑水摸鱼", "顺手牵羊", "偷梁换柱", "瞒天过海", "欲擒故纵", "声东击西", "无中生有", "暗度陈仓", "隔岸观火", "笑里藏刀", "李代桃僵", "顺手牵羊", "借刀杀人", "以逸待劳", "打草惊蛇", "借尸还魂", "调虎离山", "抛砖引玉", "擒贼擒王", "釜底抽薪", "混水摸鱼", "金蝉脱壳", "关门捉贼", "远交近攻", "假道伐虢", "偷梁换柱", "指桑骂槐", "假痴不癫", "上屋抽梯", "树上开花", "反客为主", "美人计", "空城计", "反间计", "苦肉计", "连环计", "走为上计"
],
            pure: [
"喉结", "锁骨", "腹肌", "人鱼线", "公狗腰", "腰窝", "蝴蝶骨", "脚踝", "跟腱", "指节", "青筋", "睫毛", "泪痣", "薄唇", "虎牙", "酒窝", "耳垂", "后颈", "背影", "侧颜", "下颌线", "大手", "长腿", "肌肉", "线条", "体温", "心跳", "喘息", "呼吸", "气味", "体香", "荷尔蒙", "费洛蒙", "眼神", "视线", "对视", "凝视", "偷看", "回眸", "眨眼", "Wink", "咬唇", "舔唇", "抿嘴", "嘟嘴", "鼓腮", "吐舌", "坏笑", "浅笑", "冷笑", "宠溺", "温柔", "深情", "专注", "迷离", "慵懒", "颓废", "禁欲", "清冷", "高冷", "傲娇", "腹黑", "病娇", "奶狗", "狼狗", "斯文败类", "霸道总裁", "年下弟弟", "邻家哥哥", "青梅竹马", "前男友", "初恋脸", "少年感", "大叔", "制服", "西装", "衬衫", "白衬衫", "领带", "领结", "袖扣", "手表", "金丝眼镜", "黑框眼镜", "墨镜", "口罩", "帽子", "鸭舌帽", "卫衣", "毛衣", "高领毛衣", "风衣", "大衣", "皮衣", "夹克", "牛仔外套", "浴袍", "睡衣", "丝绸", "蕾丝", "吊带", "抹胸", "露背", "露肩", "开叉", "短裙", "热裤", "黑丝", "白丝", "网袜", "高跟鞋", "细跟", "绑带", "脚链", "项链", "锁骨链", "耳钉", "耳环", "戒指", "尾戒", "纹身", "刺青", "耳后", "手腕", "脚腕", "指尖", "掌心", "怀抱", "胸膛", "肩膀", "后背", "大腿", "膝盖", "小腿", "足弓", "脚趾", "发梢", "刘海", "汗水", "泪水", "湿发", "湿身", "透视", "朦胧", "微醺", "醉酒", "脸红", "害羞", "紧张", "期待", "悸动", "心动", "触电", "酥麻", "燥热", "窒息", "晕眩", "沦陷", "失控", "忍耐", "克制", "冲动", "诱惑", "勾引", "撩拨", "试探", "暧昧", "调情", "纠缠", "拉扯", "推拉", "欲擒故纵", "若即若离", "藕断丝连", "破镜重圆", "久别重逢", "一见钟情", "日久生情", "欢喜冤家", "相爱相杀", "强制爱", "契约恋爱", "假戏真做", "替身", "白月光", "朱砂痣", "红玫瑰", "白玫瑰", "壁咚", "床咚", "地咚", "腿咚", "胸咚", "摸头杀", "捧脸杀", "侧颜杀", "背影杀", "眼神杀", "微笑杀", "低音炮", "气泡音", "早安", "晚安", "叫醒", "哄睡", "讲故事", "唱歌", "表白", "求婚", "誓言", "承诺", "约定", "秘密", "心事", "日记", "情书", "信物", "礼物", "惊喜", "浪漫", "约会", "牵手", "十指紧扣", "挽手", "搂腰", "搭肩", "拥抱", "背后抱", "公主抱", "考拉抱", "举高高", "转圈圈", "背你", "骑脖子", "膝枕", "靠肩膀", "埋胸", "蹭蹭", "贴贴", "抱抱", "亲亲", "接吻", "初吻", "额头吻", "脸颊吻", "手背吻", "掌心吻", "指尖吻", "手腕吻", "脖子吻", "锁骨吻", "肩膀吻", "后背吻", "耳边吻", "眼睛吻", "鼻尖吻", "嘴角吻", "飞吻", "空气吻", "隔空吻", "间接接吻", "深吻", "舌吻", "湿吻", "法式热吻", "咬耳朵", "吹气", "说悄悄话", "耳语", "呢喃", "呻吟", "喘气", "撒娇", "卖萌", "示弱", "求饶", "哭唧唧", "委屈", "吃醋", "闹别扭", "冷战", "和好", "道歉", "原谅", "安慰", "陪伴", "守护", "等待", "思念", "想你", "爱你", "喜欢", "心疼", "宠爱", "溺爱", "偏爱", "独占", "占有欲", "控制欲", "保护欲", "吃豆腐", "揩油", "咸猪手", "袭胸", "摸大腿", "掐腰", "拍屁股", "揉脑袋", "刮鼻子", "捏脸蛋", "戳酒窝", "画圈圈", "挠痒痒", "解扣子", "系扣子", "扯领带", "松领带", "挽袖子", "脱衣服", "穿衣服", "披外套", "围围巾", "戴手套", "系鞋带", "吹头发", "梳头", "扎辫子", "剪指甲", "涂指甲油", "涂口红", "抿口红", "擦嘴", "喂食", "喂水", "喂药", "共用餐具", "共喝一杯", "吃一口", "咬一口", "借位", "错位", "借火", "点烟", "抽烟", "吐烟圈", "喝酒", "干杯", "交杯酒", "微醉", "装醉", "断片", "宿醉", "借酒装疯", "酒后吐真言", "真心话", "大冒险", "玩游戏", "看电影", "看恐怖片", "躲进怀里", "抓紧", "尖叫", "吓哭", "游乐园", "摩天轮", "旋转木马", "鬼屋", "过山车", "电影院", "情侣座", "最后一排", "私人影院", "KTV", "情歌对唱", "酒吧", "夜店", "舞池", "贴面舞", "蹦迪", "搭讪", "要微信", "加好友", "聊天", "视频", "语音", "网恋", "异地恋", "奔现", "见面", "开房", "酒店", "民宿", "钟点房", "大床房", "圆床房", "浴缸", "泡澡", "洗澡", "淋浴", "花洒", "水珠", "泡沫", "精油", "香薰", "蜡烛", "玫瑰花瓣", "红酒", "香槟", "高脚杯", "落地窗", "夜景", "阳台", "天台", "星空", "月光", "海边", "沙滩", "海浪", "日出", "日落", "帐篷", "露营", "篝火", "烟花", "车内", "副驾驶", "后座", "兜风", "飙车", "安全带", "手刹", "方向盘", "挂挡", "倒车入库", "单手倒车", "电梯", "楼梯", "转角", "走廊", "教室", "课桌", "黑板", "粉笔", "操场", "草地", "树林", "小树林", "图书馆", "书架", "办公室", "办公桌", "会议室", "茶水间", "更衣室", "储物柜", "健身房", "瑜伽垫", "跑步机", "泳池", "水下", "更衣柜", "温泉", "私汤", "混浴", "桑拿", "汗蒸", "按摩", "推油", "SPA", "美容", "美甲", "化妆", "卸妆", "素颜", "裸妆", "纯欲妆", "绿茶妆", "斩男色", "口红", "香水", "发香", "沐浴露", "洗发水", "洗衣液", "柔顺剂", "味道", "气息", "痕迹", "印记", "草莓印", "吻痕", "抓痕", "咬痕", "牙印", "淤青", "红肿", "过敏", "发烧", "生病", "照顾", "探病", "打针", "吃药", "量体温", "敷毛巾", "喂粥", "做饭", "围裙", "裸体围裙", "家务", "洗碗", "拖地", "洗衣服", "晾衣服", "收衣服", "叠衣服", "熨衣服", "整理", "收拾", "搬家", "同居", "合租", "室友", "房东", "邻居", "串门", "借东西", "修电脑", "修灯泡", "通下水道", "换水", "搬重物", "拧瓶盖", "剥虾", "剔骨", "挑刺", "盛饭", "夹菜", "洗水果", "切水果", "做蛋糕", "烘焙", "手工", "DIY", "画画", "写生", "模特", "摄影", "拍照", "自拍", "合影", "修图", "P图", "滤镜", "美颜", "朋友圈", "点赞", "评论", "私信", "群聊", "表情包", "斗图", "网名", "头像", "签名", "背景", "特别关心", "置顶", "秒回", "已读不回", "拉黑", "删除", "屏蔽", "仅聊天", "三天可见", "半年可见", "全部可见", "分组", "标签", "备注", "昵称", "爱称", "宝宝", "宝贝", "亲爱的", "老公", "老婆", "哈尼", "达令", "哥哥", "妹妹", "姐姐", "弟弟", "叔叔", "大叔", "丫头", "小朋友", "小傻瓜", "小笨蛋", "小猪", "小狗", "小猫", "主人", "女王", "公主", "殿下", "陛下", "爱妃", "娘子", "夫君", "相公", "官人", "老爷", "少爷", "夫人", "太太", "先生", "小姐", "学长", "学弟", "学姐", "学妹", "师兄", "师弟", "师姐", "师妹", "老师", "教授", "教练", "医生", "护士", "律师", "警察", "总裁", "秘书", "助理", "明星", "粉丝", "爱豆", "经纪人", "导演", "编剧", "作家", "读者", "画手", "金主", "被包养", "潜规则", "上位", "炒作", "绯闻", "官宣", "公开", "隐婚", "领证", "结婚", "离婚", "复婚", "二婚", "相亲", "联谊", "聚会", "派对", "生日", "纪念日", "情人节", "七夕", "圣诞节", "跨年", "倒计时", "许愿", "吹蜡烛", "切蛋糕", "送花", "玫瑰", "百合", "满天星", "薰衣草", "郁金香", "向日葵", "巧克力", "糖果", "甜点", "冰淇淋", "奶茶", "咖啡", "可乐", "雪碧", "牛奶", "酸奶", "草莓", "车厘子", "水蜜桃", "葡萄", "西瓜", "芒果", "榴莲", "奶油", "芝士", "蜂蜜", "果酱", "跳跳糖", "薄荷糖", "口香糖", "棒棒糖", "棉花糖", "果冻", "布丁", "马卡龙", "甜甜圈", "泡芙", "蛋挞", "提拉米苏", "慕斯", "黑森林", "芝士蛋糕", "千层", "班戟", "雪媚娘", "大福", "糯米糍", "青团", "汤圆", "粽子", "月饼", "饺子", "馄饨", "面条", "米饭", "火锅", "烧烤", "烤肉", "牛排", "披萨", "汉堡", "薯条", "炸鸡", "寿司", "刺身", "生蚝", "扇贝", "小龙虾", "大闸蟹", "皮皮虾", "鲍鱼", "海参", "燕窝", "鱼翅", "雪蛤", "阿胶", "红枣", "枸杞", "当归", "人参", "鹿茸", "补品", "养生", "泡脚", "足疗", "汗蒸", "桑拿", "温泉", "SPA", "按摩", "推拿", "针灸", "拔罐", "刮痧", "艾灸", "瑜伽", "普拉提", "健身", "跑步", "游泳", "骑行", "爬山", "滑雪", "溜冰", "冲浪", "潜水", "跳伞", "蹦极", "攀岩", "漂流", "露营", "野餐", "烧烤", "垂钓", "高尔夫", "网球", "羽毛球", "台球", "保龄球", "射箭", "骑马", "赛车", "电竞", "游戏", "开黑", "上分", "带妹", "躺赢", "吃鸡", "王者", "联盟", "原神", "各种梗", "我可以", "斯哈斯哈", "AWSL", "阿伟死了", "我没了", "血槽已空", "原地升天", "螺旋升天", "坐地排卵", "裤子动了", "幻肢", "鸡笼", "搞黄色", "开车", "飙车", "车门焊死", "借一部说话", "好人一生平安", "求种", "求资源", "求链接", "求番号", "求科普", "指路", "空手套白狼", "白嫖", "下次一定", "这就完事了", "太快了吧", "细狗", "行不行啊", "能不能行", "主要看气质", "城里人真会玩", "疑车无据", "车轱辘压脸", "不是去幼儿园", "我要下车", "放我下去", "各种场景描写", "灯光昏暗", "气氛暧昧", "意乱情迷", "干柴烈火", "欲火焚身", "欲罢不能", "翻云覆雨", "巫山云雨", "颠鸾倒凤", "小鹿乱撞", "面红耳赤", "心跳加速", "呼吸急促", "手足无措", "不知所措", "欲拒还迎", "半推半就", "脸红心跳", "含情脉脉", "眉目传情", "暗送秋波", "眉来眼去", "打情骂俏", "如胶似漆", "干柴烈火", "各种形容词", "性感", "妩媚", "妖娆", "风骚", "撩人", "诱人", "迷人", "勾人", "销魂", "蚀骨", "酥麻", "滚烫", "湿润", "粘稠", "紧致", "松弛", "柔软", "坚硬", "粗大", "细长", "粉嫩", "白皙", "光滑", "细腻", "粗糙", "各种动词", "摸", "揉", "捏", "抓", "挠", "掐", "打", "拍", "抽", "插", "顶", "撞", "磨", "蹭", "夹", "吸", "舔", "咬", "含", "吞", "吐", "射", "喷", "流", "各种名词", "喉结", "锁骨", "腹肌", "腰窝", "人鱼线", "马甲线", "比基尼桥", "A4腰", "I6腿", "漫画腿", "筷子腿", "天鹅颈", "直角肩", "蝴蝶背", "蜜桃臀", "柯基臀", "微笑唇", "M唇", "星星眼", "桃花眼", "丹凤眼", "瑞凤眼", "柳叶眉", "野生眉", "高鼻梁", "驼峰鼻", "精灵耳", "招风耳", "美人尖", "卧蚕", "酒窝", "梨涡", "泪痣", "美人痣", "川字肌", "鲨鱼线", "子弹肌", "麒麟臂", "公狗腰", "大长腿", "手指", "指甲", "手背", "手心", "手腕", "小臂", "大臂", "肩膀", "锁骨", "脖子", "喉结", "下巴", "嘴唇", "牙齿", "舌头", "人中", "鼻子", "眼睛", "眉毛", "额头", "耳朵", "头发", "后脑勺", "侧脸", "正脸", "胸口", "乳房", "乳头", "肚子", "肚脐", "小腹", "腰", "背", "屁股", "大腿", "膝盖", "小腿", "脚踝", "脚后跟", "脚底", "脚趾", "各种风格", "纯欲", "甜辣", "酷飒", "知性", "优雅", "温柔", "可爱", "俏皮", "复古", "港风", "法式", "日系", "韩系", "欧美", "中性", "工装", "机能", "运动", "休闲", "居家", "职业", "学院", "JK", "洛丽塔", "汉服", "旗袍", "Cosplay", "各种关系", "闺蜜", "死党", "发小", "姐妹", "兄弟", "基友", "姬友", "情侣", "夫妻", "前任", "备胎", "舔狗", "海王", "渣男", "渣女", "绿茶", "白莲花", "汉子婊", "心机女", "妈宝男", "凤凰男", "直男", "直女", "普信男", "各种状态", "单身", "脱单", "恋爱", "热恋", "冷淡", "分手", "失恋", "复合", "结婚", "离婚", "丧偶", "各种心情", "开心", "难过", "生气", "愤怒", "委屈", "焦虑", "抑郁", "迷茫", "无聊", "寂寞", "空虚", "各种节日", "情人节", "七夕", "520", "1314", "光棍节", "圣诞节", "跨年", "春节", "各种礼物", "口红", "香水", "包包", "衣服", "鞋子", "首饰", "手机", "电脑", "相机", "各种活动", "逛街", "购物", "看电影", "吃饭", "唱歌", "喝酒", "蹦迪", "旅游", "露营", "野餐", "各种话题", "八卦", "明星", "美妆", "穿搭", "减肥", "健身", "情感", "星座", "运势", "塔罗", "各种梗", "纯爱战神", "牛头人", "NTR", "爱人如养花", "恋爱脑", "挖野菜", "上岸", "下头", "普信", "绝绝子", "yyds", "emo", "摆烂", "躺平", "内卷", "社恐", "社牛", "显眼包", "特种兵", "恋爱脑", "智者不入爱河", "建设美丽祖国", "搞钱", "富婆", "求包养", "不想努力了", "阿姨我不想努力了", "姐姐饿饿", "饭饭", "贴贴", "抱抱", "举高高", "要亲亲", "要抱抱", "要举高高", "嘤嘤嘤", "哼", "坏人", "不理你了", "讨厌", "大猪蹄子", "直男癌", "中央空调", "暖男", "海王", "时间管理大师", "多人运动", "罗志祥", "吴亦凡", "各种形容词", "禁欲", "清冷", "易碎感", "破碎感", "氛围感", "少年感", "爹系", "妈系", "姐系", "狼系", "奶系", "犬系", "猫系", "盐系", "甜系", "各种设定", "ABO", "哨向", "向导", "哨兵", "精神体", "双性", "生子", "产乳", "触手", "人外", "兽人", "吸血鬼", "狼人", "丧尸", "末世", "无限流", "系统", "快穿", "穿书", "重生", "穿越", "种田", "宫斗", "宅斗", "娱乐圈", "校园", "豪门", "修真", "仙侠", "玄幻", "西幻", "星际", "机甲", "电竞", "网游", "灵异", "悬疑", "推理", "刑侦"
],
            spicy: [
"喉结", "锁骨", "腹肌", "人鱼线", "公狗腰", "大长腿", "手控", "青筋", "指节", "背肌", "蝴蝶骨", "脚踝", "跟腱", "胯骨", "胸肌", "腹股沟", "睫毛", "泪痣", "薄唇", "虎牙", "酒窝", "耳垂", "后颈", "脊柱", "腰窝", "翘臀", "大腿内侧", "膝盖", "足弓", "脚趾", "体毛", "胸毛", "腹毛", "胡渣", "鬓角", "下颌线", "侧颜", "眼神", "喘息", "汗水", "体温", "心跳", "低音炮", "气泡音", "喘气", "呻吟", "娇喘", "哭腔", "求饶", "低吼", "粗口", "脏话", "叫床", "耳语", "轻声", "默契", "对视", "索吻", "强吻", "舌吻", "深吻", "湿吻", "咬嘴唇", "咬耳朵", "咬喉结", "咬锁骨", "咬肩膀", "咬手指", "种草莓", "吻痕", "抓痕", "掐痕", "齿痕", "掌印", "指印", "淤青", "红肿", "充血", "颤抖", "战栗", "痉挛", "紧绷", "瘫软", "无力", "晕厥", "失神", "翻白眼", "流口水", "吐舌头", "迷离", "渴望", "忍耐", "压抑", "爆发", "释放", "高潮", "喷水", "潮吹", "失禁", "流白", "拉丝", "粘稠", "湿润", "滑腻", "温热", "滚烫", "冰凉", "敏感", "刺激", "疼痛", "快感", "酥麻", "瘙痒", "空虚", "填满", "贯穿", "顶弄", "抽插", "撞击", "研磨", "旋转", "深入", "浅出", "快慢", "轻重", "节奏", "频率", "深度", "角度", "体位", "姿势", "前戏", "后戏", "温存", "事后", "贤者时间", "拥抱", "依偎", "爱抚", "抚摸", "揉捏", "抓挠", "拍打", "鞭打", "捆绑", "束缚", "禁锢", "囚禁", "监禁", "控制", "支配", "服从", "顺从", "反抗", "挣扎", "求救", "拒绝", "迎合", "主动", "被动", "攻", "受", "强攻", "弱受", "强受", "弱攻", "互攻", "年下", "年上", "养成", "父子", "兄弟", "师徒", "君臣", "主仆", "ABO", "Alpha", "Omega", "Beta", "发情期", "易感期", "标记", "成结", "生殖腔", "信息素", "抑制剂", "颈环", "项圈", "锁链", "手铐", "脚镣", "眼罩", "口球", "鼻钩", "乳夹", "乳环", "阴环", "贞操锁", "贞操带", "导尿管", "灌肠", "扩张", "放置", "调教", "惩罚", "奖励", "任务", "命令", "羞耻", "侮辱", "调戏", "玩弄", "亵渎", "强迫", "诱惑", "勾引", "挑逗", "勾引", "色诱", "献身", "初夜", "破处", "落红", "流血", "疼痛", "撕裂", "润滑", "扩张", "进入", "结合", "合体", "交配", "交欢", "做爱", "性交", "欢爱", "云雨", "房事", "车震", "野战", "马震", "船震", "机震", "办公室", "教室", "图书馆", "医务室", "更衣室", "厕所", "浴室", "浴缸", "温泉", "泳池", "海滩", "树林", "草地", "帐篷", "露台", "阳台", "楼梯", "电梯", "走廊", "玄关", "厨房", "餐桌", "沙发", "地毯", "落地窗", "镜子", "书房", "书桌", "椅子", "钢琴", "台球桌", "酒吧", "夜店", "KTV", "电影院", "包厢", "后座", "驾驶位", "引擎盖", "后备箱", "地铁", "公交", "火车", "飞机", "轮船", "酒店", "旅馆", "民宿", "钟点房", "情趣房", "水床", "圆床", "吊椅", "秋千", "铁笼", "十字架", "刑架", "木马", "逍遥椅", "瑜伽球", "按摩椅", "各种Play", "角色扮演", "Cosplay", "制服", "医生", "护士", "病人", "老师", "学生", "校长", "教官", "军人", "警察", "犯人", "狱警", "律师", "法官", "总裁", "秘书", "助理", "上司", "下属", "同事", "老板", "员工", "客户", "推销员", "外卖员", "快递员", "修理工", "清洁工", "保姆", "管家", "执事", "女仆", "少爷", "小姐", "公主", "王子", "骑士", "国王", "王后", "皇帝", "妃子", "太监", "将军", "士兵", "俘虏", "奴隶", "杀手", "特工", "间谍", "卧底", "黑帮", "老大", "小弟", "混混", "流氓", "强盗", "土匪", "海盗", "船长", "水手", "人鱼", "吸血鬼", "狼人", "狐狸精", "蛇精", "猫妖", "兔妖", "触手", "史莱姆", "触手怪", "异形", "怪兽", "野兽", "半兽人", "兽人", "精灵", "天使", "恶魔", "魅魔", "神父", "修女", "和尚", "道士", "书生", "秀才", "状元", "探花", "王爷", "侯爷", "大侠", "刺客", "魔头", "教主", "师尊", "徒弟", "师兄", "师弟", "义父", "干爹", "继父", "继母", "继子", "继女", "岳父", "女婿", "公公", "儿媳", "姐夫", "小姨子", "妹夫", "大舅子", "小叔子", "嫂子", "弟妹", "前男友", "前女友", "初恋", "备胎", "情敌", "小三", "老王", "邻居", "房东", "房客", "网友", "笔友", "陌生人", "路人", "痴汉", "偷窥狂", "暴露狂", "跟踪狂", "恋物癖", "受虐狂", "施虐狂", "性瘾", "无性恋", "双性恋", "同性恋", "泛性恋", "跨性别", "变性人", "人妖", "伪娘", "女装大佬", "扶他", "双性人", "阴阳人", "石女", "白虎", "青龙", "名器", "紧致", "松弛", "粉嫩", "黑木耳", "馒头", "蝴蝶", "花瓣", "花蒂", "蜜豆", "珍珠", "小穴", "后庭", "菊花", "前列腺", "G点", "子宫", "宫颈", "宫口", "输卵管", "卵巢", "阴道", "阴蒂", "尿道", "膀胱", "直肠", "结肠", "睾丸", "阴囊", "输精管", "前列腺液", "精液", "淫水", "爱液", "潮吹液", "尿液", "圣水", "黄金", "灌肠液", "润滑液", "精油", "乳液", "蜡油", "冰块", "温水", "热水", "红酒", "牛奶", "奶油", "巧克力", "蜂蜜", "果酱", "跳蛋", "按摩棒", "振动棒", "假阳具", "双头龙", "后庭塞", "肛塞", "拉珠", "扩阴器", "窥阴器", "灌肠器", "导尿管", "电击", "乳贴", "胸罩", "内裤", "丁字裤", "C字裤", "开裆裤", "丝袜", "网袜", "吊带袜", "连裤袜", "过膝袜", "白丝", "黑丝", "肉丝", "蕾丝", "豹纹", "皮革", "乳胶", "紧身衣", "胶衣", "比基尼", "死库水", "旗袍", "汉服", "和服", "JK", "洛丽塔", "婚纱", "围裙", "裸体", "半裸", "全裸", "一丝不挂", "赤身", "赤裸", "真空", "凸点", "激凸", "走光", "露底", "露点", "露毛", "露背", "露胸", "露腿", "深V", "低胸", "抹胸", "吊带", "超短裙", "包臀裙", "一步裙", "开叉裙", "百褶裙", "热裤", "高跟鞋", "长筒靴", "细跟", "尖头", "红底", "绑带", "罗马鞋", "裸足", "足交", "腿交", "乳交", "口交", "颜射", "内射", "外射", "中出", "吞精", "深喉", "冰火", "毒龙", "69", "双飞", "3P", "群P", "轮奸", "强奸", "迷奸", "诱奸", "和奸", "通奸", "乱伦", "NTR", "戴绿帽", "苦主", "黄毛", "换妻", "群交", "杂交", "兽交", "人兽", "触手Play", "产卵", "孕肚", "怀孕", "大肚", "涨奶", "哺乳", "吸奶", "挤奶", "喷奶", "母乳", "失禁Play", "黄金雨", "圣水", "憋尿", "排泄", "排便", "灌肠Play", "SP", "打屁股", "巴掌", "皮带", "藤条", "戒尺", "鞭子", "蜡烛", "滴蜡", "低温蜡", "手铐Play", "捆绑Play", "绳艺", "日式捆绑", "龟甲缚", "菱形缚", "直臂缚", "驷马倒攒", "悬吊", "倒吊", "窒息", "掐脖子", "塑料袋", "呼吸控制", "剥夺感官", "蒙眼", "耳塞", "口塞", "堵嘴", "禁言", "羞辱", "谩骂", "践踏", "踩踏", "踩脸", "舔脚", "舔鞋", "饮尿", "食粪", "人肉便器", "精液便器", "公用", "肉便器", "性奴", "母狗", "母猪", "骚货", "贱人", "婊子", "烂货", "淫荡", "放荡", "下流", "无耻", "不要脸", "不知羞耻", "饥渴", "难耐", "想要", "给我", "求你", "大力点", "快一点", "慢一点", "深一点", "不要停", "还要", "不行了", "去了", "丢了", "泄了", "射了", "喷了", "坏人", "变态", "色狼", "流氓", "禽兽", "畜生", "混蛋", "恶魔", "爸爸", "主人", "哥哥", "老公", "宝贝", "心肝", "肉肉", "小穴", "骚水", "淫水", "大鸡巴", "大肉棒", "大屌", "肉刃", "巨根", "阳具", "玉茎", "龙根", "紫红", "粗大", "坚硬", "滚烫", "青筋暴起", "怒发冲冠", "一柱擎天", "金枪不倒", "一夜七次", "器大活好", "秒射", "早泄", "阳痿", "不举", "软蛋", "细狗", "牙签", "绣花针", "快枪手", "三秒男", "绿帽子", "接盘侠", "喜当爹", "隔壁老王", "红杏出墙", "水性杨花", "人尽可夫", "残花败柳", "破鞋", "公共汽车", "公交车", "共享单车", "免费", "倒贴", "白给", "赔钱货", "狐狸精", "绿茶婊", "心机婊", "白莲花", "圣母婊", "汉子婊", "土味情话", "壁咚", "床咚", "地咚", "胸咚", "腿咚", "蝉咚", "摸头杀", "捧脸杀", "后背杀", "侧颜杀", "锁骨杀", "眼神杀", "微笑杀", "强吻", "偷吻", "索吻", "飞吻", "间接接吻", "喂食", "嘴对嘴", "共用餐具", "共用吸管", "穿男友衬衫", "裸体围裙", "人体盛", "女体盛", "男体盛", "膝枕", "大腿枕", "埋胸", "洗面奶", "抓波龙爪手", "揉胸", "袭胸", "偷看", "偷拍", "裙底", "绝对领域", "南半球", "北半球", "骆驼趾", "比基尼桥", "A4腰", "I6腿", "反手摸肚脐", "锁骨放硬币", "胸口夹笔", "胸口碎大石", "屁股写字", "扭屁股", "抖臀", "电臀", "M字腿", "鸭子坐", "萝莉坐", "W坐姿", "并拢腿", "夹腿", "摩擦", "蹭", "顶", "磨", "各种姿势", "老汉推车", "观音坐莲", "传教士", "骑乘", "后入", "侧入", "站立", "蹲姿", "跪姿", "趴着", "躺着", "侧卧", "倒立", "悬空", "抱起来", "举高高", "火车便当", "直升机", "剪刀手", "比心", "阿黑颜", "高潮脸", "嫌弃脸", "痴汉脸", "害羞脸", "享受脸", "痛苦脸", "忍耐脸", "哭泣脸", "求饶脸", "失神脸", "翻白眼", "流口水", "吐舌头", "咬下唇", "咬手帕", "咬被角", "抓床单", "抓后背", "抓头发", "十指紧扣", "掌心相对", "指尖相触", "手牵手", "挽手", "搂腰", "搭肩", "摸头", "刮鼻子", "捏脸", "戳脸", "揉脸", "亲额头", "亲眼睛", "亲鼻子", "亲脸颊", "亲耳朵", "亲脖子", "亲锁骨", "亲肩膀", "亲手臂", "亲手背", "亲手指", "亲胸口", "亲乳房", "亲乳头", "亲肚子", "亲肚皮", "亲肚脐", "亲小腹", "亲大腿", "亲膝盖", "亲小腿", "亲脚踝", "亲脚背", "亲脚趾", "亲脚底", "舔耳朵", "舔脖子", "舔锁骨", "舔胸", "舔乳头", "舔肚子", "舔肚脐", "舔大腿", "舔小穴", "舔阴蒂", "舔菊花", "舔脚", "含手指", "含乳头", "含鸡巴", "含蛋蛋", "深喉", "吞咽", "吸吮", "啃咬", "轻咬", "用力咬", "各种声音", "喘息声", "呻吟声", "叫床声", "哭泣声", "求饶声", "尖叫声", "低吼声", "撞击声", "水声", "啪啪声", "啧啧声", "吞咽声", "呼吸声", "心跳声", "摩擦声", "撕裂声", "鞭打声", "巴掌声", "各种气味", "香水味", "沐浴露味", "洗发水味", "汗味", "体香", "奶香", "腥味", "骚味", "麝香", "石楠花味", "各种触感", "光滑", "细腻", "粗糙", "柔软", "坚硬", "温热", "冰凉", "湿润", "粘稠", "紧致", "松弛", "各种形容词", "性感", "妩媚", "妖娆", "风骚", "淫荡", "放荡", "清纯", "可爱", "娇小", "丰满", "苗条", "骨感", "微胖", "肉感", "丰满", "巨乳", "贫乳", "平胸", "飞机场", "波霸", "童颜巨乳", "大屁股", "翘臀", "肥臀", "美腿", "长腿", "细腿", "大长腿", "小鸟腿", "筷子腿", "漫画腿", "各种心情", "兴奋", "激动", "紧张", "害怕", "羞涩", "害羞", "期待", "满足", "空虚", "寂寞", "难耐", "煎熬", "痛苦", "快乐", "愉悦", "爽", "舒服", "难受", "各种动词", "脱", "穿", "撕", "扯", "摸", "揉", "捏", "抓", "挠", "掐", "打", "拍", "抽", "插", "顶", "撞", "磨", "蹭", "夹", "吸", "舔", "咬", "含", "吞", "吐", "射", "喷", "流", "各种名词", "鸡巴", "肉棒", "阴茎", "屌", "蛋蛋", "睾丸", "龟头", "包皮", "阴道", "小穴", "阴蒂", "花蒂", "乳房", "奶子", "咪咪", "乳头", "奶头", "菊花", "后庭", "屁股", "臀部", "大腿", "小腿", "脚", "手", "嘴", "舌头", "牙齿", "脖子", "锁骨", "肩膀", "胸", "肚子", "腰", "背", "头发", "眼睛", "鼻子", "耳朵", "各种梗", "我可以", "我好了", "我没了", "鸡笼警告", "裤子动了", "幻肢硬了", "坐地排卵", "原地升天", "螺旋升天", "阿伟死了", "AWSL", "搞黄色", "GHS", "开车", "飙车", "车门焊死", "谁都别想下车", "这不是去幼儿园的车", "我要下车", "放我下去", "借一部说话", "说话借一部", "好人一生平安", "楼主好人", "求种", "求资源", "求链接", "求番号", "求出处", "求科普", "求指路", "空手套白狼", "伸手党", "白嫖", "下次一定", "这就完事了", "太快了吧", "细狗", "行不行啊", "能不能行", "各种颜色", "黄色", "粉色", "白色", "红色", "紫色", "黑色", "肉色", "透明", "各种场景描写", "灯光昏暗", "气氛暧昧", "意乱情迷", "干柴烈火", "欲火焚身", "欲罢不能", "翻云覆雨", "巫山云雨", "颠鸾倒凤", "各种心理描写", "小鹿乱撞", "面红耳赤", "心跳加速", "呼吸急促", "手足无措", "不知所措", "欲拒还迎", "半推半就", "各种生理反应", "脸红", "耳根红", "脖子红", "全身红", "起鸡皮疙瘩", "腿软", "腰酸", "背痛", "腿抽筋", "各种时间", "清晨", "中午", "下午", "黄昏", "傍晚", "晚上", "深夜", "凌晨", "通宵", "整晚", "各种频率", "一次", "两次", "三次", "多次", "无数次", "不停", "一直", "整夜", "天天", "各种程度", "轻轻", "用力", "狠狠", "猛烈", "温柔", "粗暴", "疯狂", "各种结果", "怀孕", "流产", "生孩子", "避孕", "各种道具", "套套", "药", "润滑剂", "玩具", "绳子", "各种称呼", "老公", "老婆", "亲爱的", "宝贝", "宝宝", "哈尼", "达令", "哥哥", "妹妹", "弟弟", "姐姐", "叔叔", "阿姨", "爸爸", "妈妈", "爷爷", "奶奶", "主人", "奴隶", "各种关系", "情侣", "夫妻", "炮友", "基友", "闺蜜", "朋友", "同事", "同学", "师生", "各种状态", "单身", "恋爱", "结婚", "离婚", "丧偶", "各种节日", "情人节", "七夕", "圣诞节", "光棍节", "各种礼物", "花", "巧克力", "戒指", "项链", "衣服", "包包", "各种食物", "香蕉", "黄瓜", "茄子", "火腿肠", "热狗", "鲍鱼", "海鲜", "牛奶", "豆浆", "酸奶", "奶油", "冰淇淋", "棒棒糖", "果冻", "布丁", "各种动物", "狗", "猫", "猪", "马", "牛", "羊", "蛇", "龙", "虎", "狼", "狐狸", "兔子", "各种植物", "桃花", "菊花", "百合", "玫瑰", "藤蔓", "树枝", "花朵", "果实", "叶子", "根茎", "各种自然现象", "风", "雨", "雷", "电", "雪", "霜", "雾", "云", "彩虹", "阳光", "月光", "星光", "各种建筑", "高楼", "别墅", "公寓", "平房", "小屋", "城堡", "宫殿", "塔", "桥", "路", "墙", "门", "窗", "各种交通工具", "车", "船", "飞机", "火车", "地铁", "公交", "自行车", "摩托车", "各种家具", "床", "沙发", "椅子", "桌子", "柜子", "灯", "镜子", "地毯", "窗帘", "各种电器", "电视", "电脑", "手机", "相机", "音响", "空调", "冰箱", "洗衣机", "吹风机", "各种日用品", "牙刷", "毛巾", "浴巾", "洗发水", "沐浴露", "肥皂", "牙膏", "纸巾", "湿巾", "卫生巾", "各种文具", "笔", "纸", "本子", "尺子", "剪刀", "胶水", "各种乐器", "钢琴", "吉他", "小提琴", "笛子", "萧", "各种体育用品", "球", "拍", "杆", "绳", "各种武器", "刀", "剑", "枪", "鞭", "棍", "棒", "各种职业", "医生", "老师", "警察", "护士", "空姐", "司机", "厨师", "服务员", "各种称谓", "先生", "小姐", "女士", "夫人", "太太", "少爷", "老爷", "公子", "各种颜色", "红", "橙", "黄", "绿", "青", "蓝", "紫", "黑", "白", "灰", "各种方位", "上", "下", "左", "右", "前", "后", "里", "外", "中", "旁", "间", "边", "角", "头", "底", "顶", "端", "面", "心", "腹", "背", "腰", "臀", "腿", "脚", "手", "臂", "肩", "颈", "头", "脸", "眼", "耳", "鼻", "口", "牙", "舌", "唇", "发", "眉", "肤", "肉", "骨", "血", "汗", "泪", "尿", "屎", "精", "液", "水", "气", "味", "声", "音", "光", "影", "形", "色", "情", "欲", "爱", "恨", "怨", "愁", "苦", "痛", "乐", "喜", "怒", "哀", "惧", "恐", "惊", "疑", "惑", "迷", "乱", "狂", "痴", "呆", "傻", "笨", "蠢", "坏", "好", "美", "丑", "善", "恶", "真", "假", "虚", "实", "强", "弱", "硬", "软", "大", "小", "长", "短", "粗", "细", "深", "浅", "快", "慢", "高", "低", "重", "轻", "紧", "松", "冷", "热", "温", "凉", "干", "湿", "滑", "涩", "香", "臭", "酸", "甜", "苦", "辣", "咸", "淡", "浓", "稀", "多", "少", "有", "无", "是", "非", "对", "错", "生", "死", "存", "亡", "动", "静", "起", "止", "来", "去", "进", "出", "开", "关", "合", "分", "聚", "散", "离", "别", "断", "连", "接", "受", "给", "要", "拿", "放", "推", "拉", "拖", "拽", "抱", "搂", "背", "扛", "顶", "撞", "击", "打", "拍", "抽", "插", "入", "出", "射", "喷", "流", "滴", "漏", "溢", "满", "空", "盈", "亏", "涨", "缩", "伸", "展", "曲", "弯", "直", "竖", "横", "斜", "侧", "正", "反", "倒", "立", "坐", "卧", "躺", "趴", "跪", "蹲", "起", "伏", "高", "低", "上", "下"
]
        };

        let currentCategory = 'normal'; // 默认普通
        
        let peer = null, connList = [], hostConn = null;
        let myId = null, myName = "", isHost = false;
        let players = []; 
        
        // 游戏状态
        let mode = ''; // 'classic' or 'relay'
        let currentDrawer = null;
        let currentWord = '';
        
        // 接龙专用
        let relayQueue = []; 
        let relayStep = 0;   
        let relayHistory = []; 
        let relayStarterIndex = 0; 

        let canvas, ctx, isDrawing = false;

        window.onload = () => {
            const saved = localStorage.getItem('draw_name');
            if(saved) document.getElementById('myName').value = saved;
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            initCanvasEvents();
        };

        function resizeCanvas() { canvas.width = canvas.parentElement.clientWidth; canvas.height = canvas.parentElement.clientHeight; }

        // ================= 1. 联机 =================
        try {
            peer = new Peer(null, { debug: 2 });
            peer.on('open', id => myId = id);
        } catch(e) {}

        function createRoom() {
            myName = document.getElementById('myName').value || "房主";
            localStorage.setItem('draw_name', myName);
            isHost = true;
            players = [{ id: myId, name: myName, score: 0 }];
            document.getElementById('lobbyBtns').style.display = 'none';
            document.getElementById('hostWait').style.display = 'block';
            document.getElementById('myRoomId').innerText = myId;
            
            peer.on('connection', conn => {
                connList.push(conn);
                conn.on('open', () => conn.send({ type: 'WELCOME', players: players }));
                conn.on('data', data => handleData(data, conn));
                conn.on('close', () => {
                    players = players.filter(p => p.id !== conn.peer);
                    broadcast({ type: 'UPDATE_PLAYERS', players: players });
                });
            });
        }

        function joinRoom() {
            myName = document.getElementById('myName').value || "玩家";
            localStorage.setItem('draw_name', myName);
            const hostId = document.getElementById('hostIdInput').value.trim();
            if(!hostId) return alert('请输入房号');
            hostConn = peer.connect(hostId, { metadata: { name: myName } });
            hostConn.on('open', () => {
                document.getElementById('loginModal').style.display = 'none';
                showOverlay('wait', '等待房主开始...');
            });
            hostConn.on('data', data => handleData(data));
        }

        function enterGame() {
            broadcast({ type: 'ENTER_GAME' });
            showOverlay('host', '请选择模式');
            document.getElementById('loginModal').style.display = 'none';
        }

        // ================= 2. 消息处理 =================
        function handleData(data, conn) {
            if (isHost) {
                if (data.type === 'LOGIN') {
                    players.push({ id: conn.peer, name: data.name, score: 0 });
                    document.getElementById('waitCount').innerText = players.length;
                    broadcast({ type: 'UPDATE_PLAYERS', players: players });
                }
                else if (data.type === 'DRAW_DATA') { broadcast(data); drawLine(data); }
                else if (data.type === 'CLEAR') { broadcast(data); ctx.clearRect(0,0,canvas.width,canvas.height); }
                
                else if (data.type === 'GUESS_CLASSIC') {
                    if (mode === 'classic' && data.content === currentWord) {
                        broadcast({ type: 'WINNER', name: data.name, answer: currentWord });
                        setTimeout(nextRoundClassic, 3000);
                    } else {
                        broadcast({ type: 'CHAT', name: data.name, content: data.content });
                    }
                }
                
                else if (data.type === 'RELAY_SUBMIT') {
                    handleRelayStep(data);
                }
            }

            if (data.type === 'WELCOME') { hostConn.send({ type: 'LOGIN', name: myName }); }
            else if (data.type === 'UPDATE_PLAYERS') { players = data.players; renderPlayers(); }
            else if (data.type === 'ENTER_GAME') { 
                document.getElementById('loginModal').style.display = 'none'; 
                if(!isHost) showOverlay('wait', '等待房主选择模式...');
            }
            else if (data.type === 'DRAW_DATA') { drawLine(data); }
            else if (data.type === 'CLEAR') { ctx.clearRect(0,0,canvas.width,canvas.height); }
            else if (data.type === 'CHAT') { addLog(data.name, data.content); }
            
            else if (data.type === 'START_CLASSIC') { startRoundUI(data); }
            else if (data.type === 'WINNER') { addLog('系统', `🎉 ${data.name} 猜对了：${data.answer}!`, 'sys'); }
            
            else if (data.type === 'RELAY_YOUR_TURN') { startRelayTurnUI(data); }
            else if (data.type === 'RELAY_WAIT') { showOverlay('wait', `正在由 ${data.name} 进行 ${data.act}...`); }
            else if (data.type === 'RELAY_GAMEOVER') { showRelayResult(data.history); }
        }

        function broadcast(msg) {
            if (isHost) {
                if(msg.type !== 'DRAW_DATA') handleData(msg); 
                connList.forEach(c => c.send(msg));
            } else { hostConn.send(msg); }
        }

        // ================= 3. 游戏控制逻辑 (核心修改点) =================
        
        // 房主选择题库
        function selectCategory(cat) {
            currentCategory = cat;
            document.querySelectorAll('.cat-btn').forEach(b => b.classList.remove('active'));
            
            let btnId = 'btnNormal';
            if(cat === 'pure') btnId = 'btnPure';
            if(cat === 'spicy') btnId = 'btnSpicy';
            document.getElementById(btnId).classList.add('active');
        }

        // 获取随机词 (基于当前题库)
        function getRandomWord() {
            const list = WORD_DB[currentCategory];
            return list[Math.floor(Math.random() * list.length)];
        }

        // 统一开始入口
        function startGame(selectedMode) {
            mode = selectedMode;
            if (mode === 'classic') {
                startClassic();
            } else {
                startRelay();
            }
        }

        // ---------------- 竞速模式 ----------------
        function startClassic() {
            nextRoundClassic();
        }

        function nextRoundClassic() {
            const drawer = players[Math.floor(Math.random() * players.length)];
            currentDrawer = drawer.id;
            currentWord = getRandomWord(); // 🔥 使用选定题库
            broadcast({ type: 'START_CLASSIC', drawer: drawer.id, name: drawer.name, word: currentWord });
        }

        function startRoundUI(data) {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            renderPlayers();
            document.getElementById('statusText').innerText = `画手：${data.name}`;
            
            if (myId === data.drawer) {
                showOverlay('word', data.word);
                document.getElementById('chatInputArea').style.display = 'none';
            } else {
                showOverlay('none');
                document.getElementById('toolBar').style.display = 'none';
                document.getElementById('chatInputArea').style.display = 'flex';
            }
        }

        // ---------------- 接龙模式 ----------------
        function startRelay() {
            let p = [...players];
            for(let i=0; i<relayStarterIndex; i++) p.push(p.shift());
            
            relayQueue = p;
            relayStep = 0;
            relayHistory = [];
            
            currentWord = getRandomWord(); // 🔥 使用选定题库
            
            relayHistory.push({ type: 'word', content: currentWord, name: '系统' });
            triggerRelayStep();
            relayStarterIndex = (relayStarterIndex + 1) % players.length;
        }

        function triggerRelayStep() {
            if (relayStep >= relayQueue.length) {
                broadcast({ type: 'RELAY_GAMEOVER', history: relayHistory });
                return;
            }

            const p = relayQueue[relayStep];
            const isDrawingTurn = (relayStep % 2 === 0);
            const lastContent = relayHistory[relayHistory.length - 1].content;

            connList.forEach(c => {
                if (c.peer === p.id) {
                    c.send({ type: 'RELAY_YOUR_TURN', act: isDrawingTurn?'draw':'guess', content: lastContent });
                } else {
                    c.send({ type: 'RELAY_WAIT', name: p.name, act: isDrawingTurn?'画画':'猜题' });
                }
            });
            if (myId === p.id) {
                handleData({ type: 'RELAY_YOUR_TURN', act: isDrawingTurn?'draw':'guess', content: lastContent });
            } else {
                handleData({ type: 'RELAY_WAIT', name: p.name, act: isDrawingTurn?'画画':'猜题' });
            }
        }

        function startRelayTurnUI(data) {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            document.getElementById('statusText').innerText = "轮到你了！";

            if (data.act === 'draw') {
                showOverlay('word', data.content);
            } else {
                showOverlay('guess_img', data.content);
            }
        }

        function handleRelayStep(data) {
            const p = relayQueue[relayStep];
            const type = (relayStep % 2 === 0) ? 'img' : 'text';
            relayHistory.push({ name: p.name, type: type, content: data.content });
            relayStep++;
            triggerRelayStep();
        }

        // ================= 5. 操作交互 =================
        function startDrawing() {
            hideOverlay();
            document.getElementById('toolBar').style.display = 'flex';
        }

        function changeWord() {
            if(mode === 'classic') {
                if(isHost) {
                    currentWord = getRandomWord();
                    broadcast({ type: 'START_CLASSIC', drawer: myId, name: myName, word: currentWord });
                }
            } else {
                if(relayStep === 0) {
                    currentWord = getRandomWord();
                    relayHistory[0].content = currentWord;
                    document.getElementById('wordText').innerText = currentWord;
                }
            }
        }

        function finishDrawing() {
            if (mode === 'classic') {
                alert('竞速模式不需要点这个，等他们猜对就行！');
            } else {
                const imgData = canvas.toDataURL();
                const msg = { type: 'RELAY_SUBMIT', content: imgData };
                if(isHost) handleRelayStep(msg); else hostConn.send(msg);
            }
        }

        function submitRelayGuess() {
            const val = document.getElementById('relayGuessInput').value.trim();
            if(!val) return;
            const msg = { type: 'RELAY_SUBMIT', content: val };
            if(isHost) handleRelayStep(msg); else hostConn.send(msg);
        }

        function sendChat() {
            const val = document.getElementById('chatInput').value.trim();
            if(!val) return;
            const msg = { type: 'GUESS_CLASSIC', name: myName, content: val };
            if(isHost) handleData(msg); else hostConn.send(msg);
            document.getElementById('chatInput').value = '';
        }

        // ================= 6. 辅助函数 =================
        function showOverlay(type, data) {
            document.querySelectorAll('.overlay > div').forEach(d => d.style.display='none');
            document.getElementById('gameOverlay').style.display = 'flex';
            
            if(type === 'word') {
                document.getElementById('wordDisplay').style.display = 'block';
                document.getElementById('wordText').innerText = data;
                document.getElementById('overlayTitle').innerText = "你要画的是：";
            } else if (type === 'guess_img') {
                document.getElementById('imgDisplay').style.display = 'flex';
                document.getElementById('relayImg').src = data;
                document.getElementById('relayGuessInput').value = '';
                document.getElementById('overlayTitle').innerText = "上一棒画了啥？";
            } else if (type === 'wait') {
                document.getElementById('waitDisplay').style.display = 'block';
                document.querySelector('#waitDisplay .overlay-text').innerText = data;
            } else if (type === 'host') {
                document.getElementById('hostControls').style.display = 'flex';
                document.getElementById('overlayTitle').innerText = "房主控制台";
            } else if (type === 'none') {
                document.getElementById('gameOverlay').style.display = 'none';
            }
        }

        function hideOverlay() { document.getElementById('gameOverlay').style.display = 'none'; }

        function showRelayResult(history) {
            const list = document.getElementById('resultList');
            list.innerHTML = '';
            history.forEach(item => {
                const div = document.createElement('div');
                div.className = 'result-item';
                if (item.type === 'word' || item.type === 'text') {
                    div.innerHTML = `<b>${item.name}</b>: <span style="font-size:20px; color:#ff9a9e;">${item.content}</span>`;
                } else {
                    div.innerHTML = `<b>${item.name}</b> 画了:<br><img src="${item.content}" class="result-img">`;
                }
                list.appendChild(div);
            });
            document.getElementById('gameOverlay').style.display = 'flex';
            document.getElementById('resultDisplay').style.display = 'block';
            document.getElementById('overlayTitle').innerText = "灵魂画作大赏";
        }

        let currentColor = '#000';
        let lastX, lastY;
        function initCanvasEvents() {
            canvas.onmousedown = e => { isDrawing=true; lastX=e.offsetX; lastY=e.offsetY; };
            canvas.onmousemove = e => { if(isDrawing) sendDraw(e.offsetX, e.offsetY); };
            canvas.onmouseup = () => isDrawing=false;
            canvas.ontouchstart = e => { e.preventDefault(); const r=canvas.getBoundingClientRect(); isDrawing=true; lastX=e.touches[0].clientX-r.left; lastY=e.touches[0].clientY-r.top; };
            canvas.ontouchmove = e => { e.preventDefault(); if(isDrawing) { const r=canvas.getBoundingClientRect(); sendDraw(e.touches[0].clientX-r.left, e.touches[0].clientY-r.top); } };
            canvas.ontouchend = () => isDrawing=false;
        }
        function sendDraw(x, y) {
            const w = canvas.width, h = canvas.height;
            const data = { type:'DRAW_DATA', x1:lastX/w, y1:lastY/h, x2:x/w, y2:y/h, color:currentColor };
            drawLine(data);
            if(isHost) broadcast(data); else hostConn.send(data);
            lastX = x; lastY = y;
        }
        function drawLine(d) {
            const w = canvas.width, h = canvas.height;
            ctx.beginPath();
            ctx.moveTo(d.x1*w, d.y1*h); ctx.lineTo(d.x2*w, d.y2*h);
            ctx.strokeStyle = d.color; ctx.lineWidth = d.color==='#fff'?20:3; ctx.lineCap='round'; ctx.stroke();
        }
        function setColor(c) { currentColor = c; }
        function clearCanvas() { 
            ctx.clearRect(0,0,canvas.width,canvas.height);
            if(isHost) broadcast({type:'CLEAR'}); else hostConn.send({type:'CLEAR'});
        }
        function renderPlayers() {
            const div = document.getElementById('playerList');
            div.innerHTML = '';
            players.forEach(p => {
                const card = document.createElement('div');
                card.className = `player-card ${p.id===currentDrawer?'active':''}`;
                card.innerHTML = `<div style="font-size:20px;">🧸</div><div class="p-name">${p.name}</div><div class="p-score">${p.score}</div>`;
                div.appendChild(card);
            });
        }
        function addLog(n, t, c='') {
            const box = document.getElementById('chatList');
            box.innerHTML += `<div class="chat-msg ${c}">${n}: ${t}</div>`;
            box.scrollTop = box.scrollHeight;
        }
        function copyId() { navigator.clipboard.writeText(myId).then(()=>alert('房号已复制')); }
    </script>
</body>
</html>
