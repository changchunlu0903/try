<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>ğŸ¨ Loppy çµé­‚ç”»æ‰‹</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.4.7/peerjs.min.js"></script>
    <style>
        @font-face { font-family: 'MyCutieFont'; src: url('https://files.catbox.moe/cweam3.ttf') format('truetype'); font-display: swap; }
        
        * { margin: 0; padding: 0; box-sizing: border-box; touch-action: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: 'MyCutieFont', sans-serif;
            background: linear-gradient(135deg, #fff1eb 0%, #ace0f9 100%);
            height: 100vh; display: flex; flex-direction: column; overflow: hidden;
        }

        /* === é¡¶éƒ¨æ  === */
        .top-bar {
            padding: 10px; background: rgba(255,255,255,0.8); display: flex; justify-content: space-between; align-items: center;
            border-bottom: 2px dashed #ff9a9e; z-index: 100;
        }
        .back-btn { text-decoration: none; font-size: 20px; cursor: pointer; }
        .game-info { font-size: 16px; color: #ff6b81; font-weight: bold; }
        .timer { font-size: 20px; color: #a29bfe; font-weight: bold; }

        /* === æ¸¸æˆä¸»åŒºåŸŸ === */
        .main-area { flex: 1; display: flex; position: relative; overflow: hidden; }
        
        /* å·¦ä¾§ï¼šç©å®¶åˆ—è¡¨/æ’å */
        .sidebar {
            width: 80px; background: rgba(255,255,255,0.5); border-right: 2px dashed #fff;
            overflow-y: auto; padding: 5px; display: flex; flex-direction: column; gap: 5px;
        }
        .player-card {
            background: #fff; border-radius: 10px; padding: 5px; text-align: center; border: 2px solid #fff;
            transition: 0.3s;
        }
        .player-card.active { border-color: #ff9a9e; transform: scale(1.05); }
        .player-card.drawer { border-color: #a29bfe; }
        .p-avatar { font-size: 24px; }
        .p-name { font-size: 10px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .p-score { font-size: 12px; color: #ff7675; font-weight: bold; }

        /* ä¸­é—´ï¼šç”»æ¿ */
        .canvas-container {
            flex: 1; position: relative; background: #fff; margin: 10px; border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 4px solid #a29bfe;
            display: flex; justify-content: center; align-items: center; cursor: crosshair;
        }
        canvas { touch-action: none; width: 100%; height: 100%; border-radius: 15px; }
        
        /* æç¤ºè¯é®ç½© */
        .word-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255,255,255,0.95); display: flex; flex-direction: column; 
            justify-content: center; align-items: center; z-index: 20;
            display: none; /* é»˜è®¤éšè— */
        }
        .word-text { font-size: 40px; color: #ff9a9e; margin-bottom: 20px; text-align: center;}

        /* å³ä¾§/åº•éƒ¨ï¼šèŠå¤©ä¸å·¥å…· */
        .chat-area {
            position: absolute; bottom: 10px; right: 10px; width: 200px; height: 150px;
            background: rgba(255,255,255,0.8); border-radius: 15px; border: 2px solid #fff;
            display: flex; flex-direction: column; overflow: hidden; pointer-events: none; /* é»˜è®¤ç©¿é€ */
        }
        .chat-msgs { flex: 1; overflow-y: auto; padding: 5px; font-size: 12px; pointer-events: auto;}
        .chat-msg { margin-bottom: 2px; }
        .chat-msg.correct { color: #00b894; font-weight: bold; }
        .chat-msg.sys { color: #a29bfe; }
        .chat-input-box { display: flex; padding: 5px; background: #fff; pointer-events: auto; }
        .chat-ipt { flex: 1; border: 1px solid #ddd; border-radius: 5px; padding: 3px; outline: none; }

        /* ç”»ç¬”å·¥å…·æ  (ä»…ç”»ç”»çš„äººå¯è§) */
        .tools-bar {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: #fff; padding: 10px; border-radius: 50px; display: none; gap: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2); z-index: 50;
        }
        .color-btn { width: 30px; height: 30px; border-radius: 50%; border: 2px solid #fff; cursor: pointer; }
        .color-btn.active { transform: scale(1.2); border-color: #555; }
        .tool-btn { font-size: 20px; cursor: pointer; padding: 0 10px; }

        /* === å¼¹çª— === */
        .modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); display: flex; justify-content: center; align-items: center;
            z-index: 1000; backdrop-filter: blur(5px);
        }
        .modal-box {
            background: #fff; padding: 30px; border-radius: 30px; width: 90%; max-width: 400px;
            text-align: center; border: 4px solid #ffb7c5; position: relative;
        }
        .btn {
            padding: 12px 25px; border-radius: 20px; border: none; font-size: 16px;
            color: white; cursor: pointer; margin-top: 10px; width: 100%; font-family: inherit;
        }
        .btn-pink { background: #ff9a9e; }
        .btn-blue { background: #74b9ff; }
        .ipt { width: 100%; padding: 10px; border-radius: 10px; border: 2px solid #ddd; margin-bottom: 10px; text-align: center; }

    </style>
</head>
<body>

    <div class="top-bar">
        <a href="game_loppy.html" class="back-btn">ğŸ”™</a>
        <div class="game-info" id="statusText">ç­‰å¾…å¼€å§‹...</div>
        <div class="timer" id="timerDisplay"></div>
    </div>

    <div class="main-area">
        <div class="sidebar" id="playerList">
            </div>

        <div class="canvas-container" id="canvasBox">
            <canvas id="gameCanvas"></canvas>
            
            <div class="word-overlay" id="wordOverlay">
                <div class="word-text" id="overlayText">ç­‰å¾…æˆ¿ä¸»å¼€å§‹...</div>
                <div id="hostControls" style="display:none; gap:10px;">
                    <button class="btn btn-blue" onclick="startGame('classic')">ğŸ¨ ç«é€ŸçŒœç”»æ¨¡å¼</button>
                    <button class="btn btn-pink" onclick="startGame('relay')">ğŸ§© çµé­‚æ¥é¾™æ¨¡å¼</button>
                </div>
            </div>
        </div>

        <div class="chat-area">
            <div class="chat-msgs" id="chatList"></div>
            <div class="chat-input-box" id="guessInputArea">
                <input type="text" class="ipt chat-ipt" id="guessInput" placeholder="åœ¨æ­¤è¾“å…¥ç­”æ¡ˆ..." onkeydown="if(event.keyCode==13) sendGuess()">
            </div>
        </div>
    </div>

    <div class="tools-bar" id="toolBar">
        <div class="color-btn" style="background:#000" onclick="setColor('#000000')"></div>
        <div class="color-btn" style="background:#ff7675" onclick="setColor('#ff7675')"></div>
        <div class="color-btn" style="background:#fdcb6e" onclick="setColor('#fdcb6e')"></div>
        <div class="color-btn" style="background:#55efc4" onclick="setColor('#55efc4')"></div>
        <div class="color-btn" style="background:#74b9ff" onclick="setColor('#74b9ff')"></div>
        <div class="tool-btn" onclick="setColor('#ffffff')" title="æ©¡çš®æ“¦">ğŸ§½</div>
        <div class="tool-btn" onclick="clearCanvas(true)" title="æ¸…ç©º">ğŸ—‘ï¸</div>
    </div>

    <div class="modal" id="loginModal">
        <div class="modal-box">
            <h2 style="color:#ff9a9e; margin-bottom:15px;">ğŸ¨ çµé­‚ç”»æ‰‹</h2>
            <input type="text" class="ipt" id="myName" placeholder="ä½ çš„åå­—">
            
            <div id="lobbyBtns">
                <button class="btn btn-pink" onclick="createRoom()">ğŸ‘‘ æˆ‘æ˜¯æˆ¿ä¸» (å»ºæˆ¿)</button>
                <div style="margin:10px; color:#aaa;">- æˆ– -</div>
                <input type="text" class="ipt" id="hostIdInput" placeholder="è¾“å…¥æˆ¿å·">
                <button class="btn btn-blue" onclick="joinRoom()">ğŸš€ åŠ å…¥æˆ¿é—´</button>
            </div>

            <div id="hostWait" style="display:none;">
                <p>æˆ¿å·: <span id="myRoomId" style="color:#ff6b81; font-weight:bold; user-select:all;" onclick="copyId()">...</span></p>
                <p style="font-size:12px; color:#888;">(ç‚¹å‡»å¤åˆ¶å‘ç»™æœ‹å‹ï¼Œæœ€å°‘3äºº)</p>
                <p>å½“å‰äººæ•°: <span id="waitCount">1</span></p>
                <button class="btn btn-pink" onclick="enterGame()">è¿›å…¥æ¸¸æˆå¤§å…</button>
            </div>
        </div>
    </div>

    <script>
        // ================= é…ç½®ä¸è¯åº“ =================
        const WORDS = ["è‹¹æœ", "é¦™è•‰", "å…”å­", "å¥¥ç‰¹æ›¼", "æµ·ç»µå®å®", "ç”µè„‘", "ä¸‹é›¨", "å¥¶èŒ¶", "Loppy", "æ”¾å±", "ç¡è§‰", "æ¥å»", "å½©è™¹", "å†°æ·‡æ·‹", "èœ˜è››ä¾ ", "é©¬æ¡¶", "è‡ªè¡Œè½¦", "ç«ç‘°èŠ±"];
        
        let peer = null, connList = [], hostConn = null;
        let myId = null, myName = "";
        let isHost = false;
        let players = []; // {id, name, score, avatar}
        
        // æ¸¸æˆçŠ¶æ€
        let currentMode = ''; // 'classic' or 'relay'
        let currentWord = '';
        let drawerId = null; // å½“å‰ç”»ç”»çš„äºº
        let isDrawing = false;
        let ctx = null, canvas = null;
        let timer = null;

        // åˆå§‹åŒ–
        window.onload = () => {
            const savedName = localStorage.getItem('draw_name');
            if(savedName) document.getElementById('myName').value = savedName;
            
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            initCanvasEvents();
        };

        function resizeCanvas() {
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight;
        }

        // ================= 1. è”æœºåŸºç¡€ =================
        try {
            peer = new Peer(null, { debug: 2 });
            peer.on('open', id => myId = id);
            peer.on('error', err => alert('è”æœºé”™è¯¯:' + err.type));
        } catch(e) { alert('ç»„ä»¶åŠ è½½å¤±è´¥'); }

        function createRoom() {
            myName = document.getElementById('myName').value.trim() || "ç”»æ‰‹";
            localStorage.setItem('draw_name', myName);
            isHost = true;
            
            players = [{ id: myId, name: myName, score: 0 }];
            
            document.getElementById('lobbyBtns').style.display = 'none';
            document.getElementById('hostWait').style.display = 'block';
            document.getElementById('myRoomId').innerText = myId;

            peer.on('connection', conn => {
                connList.push(conn);
                conn.on('open', () => {
                    // æ¬¢è¿æ–°ç©å®¶
                    conn.send({ type: 'WELCOME', players: players });
                });
                conn.on('data', data => handleData(data, conn));
                conn.on('close', () => {
                    // ç©å®¶é€€å‡ºå¤„ç†
                    players = players.filter(p => p.id !== conn.peer);
                    broadcast({ type: 'UPDATE_PLAYERS', players: players });
                    addLog('ç³»ç»Ÿ', 'æœ‰äººé€€å‡ºäº†');
                });
            });
        }

        function joinRoom() {
            myName = document.getElementById('myName').value.trim() || "ç”»æ‰‹";
            localStorage.setItem('draw_name', myName);
            const hostId = document.getElementById('hostIdInput').value.trim();
            if(!hostId) return alert('è¯·è¾“å…¥æˆ¿å·');

            hostConn = peer.connect(hostId, { metadata: { name: myName } });
            hostConn.on('open', () => {
                document.getElementById('loginModal').style.display = 'none';
                addLog('ç³»ç»Ÿ', 'å·²è¿æ¥æˆ¿ä¸»');
            });
            hostConn.on('data', data => handleData(data));
            hostConn.on('close', () => { alert('æˆ¿ä¸»æ–­å¼€'); location.reload(); });
        }

        function enterGame() {
            broadcast({ type: 'ENTER_GAME' });
            initGameUI();
        }

        // ================= 2. æ•°æ®å¤„ç†æ ¸å¿ƒ =================
        function handleData(data, senderConn) {
            // æˆ¿ä¸»å¤„ç†é€»è¾‘
            if (isHost) {
                if (data.type === 'LOGIN') {
                    // ç©å®¶ç™»å½•æ³¨å†Œ
                    players.push({ id: senderConn.peer, name: data.name, score: 0 });
                    document.getElementById('waitCount').innerText = players.length;
                    broadcast({ type: 'UPDATE_PLAYERS', players: players });
                }
                else if (data.type === 'DRAW_DATA') {
                    broadcast(data); // è½¬å‘ç”»ç”»æ•°æ®ç»™æ‰€æœ‰äºº
                    drawOnCanvas(data); // è‡ªå·±ä¹Ÿç”»
                }
                else if (data.type === 'GUESS') {
                    // æ£€æŸ¥ç­”æ¡ˆ (ç«é€Ÿæ¨¡å¼)
                    if (currentMode === 'classic' && data.content === currentWord) {
                        // çŒœå¯¹äº†ï¼
                        let p = players.find(x => x.id === data.from);
                        if(p) p.score += 10; // çŒœå¯¹åŠ åˆ†
                        let d = players.find(x => x.id === drawerId);
                        if(d) d.score += 5; // ç”»ç”»çš„ä¹ŸåŠ åˆ†
                        
                        broadcast({ type: 'CORRECT_GUESS', winner: p.name, answer: currentWord, players: players });
                        // ç»“æŸè¿™ä¸€è½®
                        setTimeout(nextRoundClassic, 2000);
                    } else {
                        // çŒœé”™æˆ–è€…èŠå¤©ï¼Œè½¬å‘ç»™æ‰€æœ‰äºº
                        broadcast({ type: 'CHAT', name: data.name, content: data.content });
                    }
                }
                else if (data.type === 'RELAY_DONE') {
                    // æ¥é¾™æ¨¡å¼ï¼šä¸€ä¸ªäººç”»å®Œäº†/çŒœå®Œäº†
                    nextStepRelay();
                }
            } 
            
            // é€šç”¨é€»è¾‘ (æ‰€æœ‰äººéƒ½ä¼šæ‰§è¡Œ)
            if (data.type === 'WELCOME') {
                // æˆ‘æ˜¯æ–°ç©å®¶ï¼Œå‘Šè¯‰æˆ¿ä¸»æˆ‘çš„åå­—
                hostConn.send({ type: 'LOGIN', name: myName });
            }
            else if (data.type === 'UPDATE_PLAYERS') {
                players = data.players;
                renderPlayerList();
                if(isHost) document.getElementById('waitCount').innerText = players.length;
            }
            else if (data.type === 'ENTER_GAME') {
                initGameUI();
            }
            else if (data.type === 'DRAW_DATA') {
                drawOnCanvas(data);
            }
            else if (data.type === 'CLEAR_CANVAS') {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            else if (data.type === 'CHAT') {
                addLog(data.name, data.content);
            }
            else if (data.type === 'ROUND_START') {
                startRoundUI(data);
            }
            else if (data.type === 'CORRECT_GUESS') {
                addLog('ç³»ç»Ÿ', `ğŸ‰ ${data.winner} çŒœå¯¹äº†ï¼š${data.answer}!`, 'correct');
                players = data.players;
                renderPlayerList();
            }
        }

        function broadcast(msg) {
            if(isHost) {
                // è‡ªå·±å¤„ç†
                if(msg.type !== 'DRAW_DATA') handleData(msg); // ç”»ç”»æ•°æ®å•ç‹¬å¤„ç†é¿å…åŒé‡ç»˜åˆ¶
                // å‘ç»™æ‰€æœ‰äºº
                connList.forEach(c => c.send(msg));
            } else {
                hostConn.send(msg);
            }
        }

        // ================= 3. æ¸¸æˆé€»è¾‘ (æˆ¿ä¸»æ§åœº) =================
        function initGameUI() {
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('wordOverlay').style.display = 'flex';
            if(isHost) {
                document.getElementById('overlayText').innerText = "è¯·é€‰æ‹©æ¸¸æˆæ¨¡å¼";
                document.getElementById('hostControls').style.display = 'flex';
            } else {
                document.getElementById('overlayText').innerText = "ç­‰å¾…æˆ¿ä¸»é€‰æ‹©æ¨¡å¼...";
            }
        }

        function startGame(mode) {
            currentMode = mode;
            if(mode === 'classic') {
                // ç«é€Ÿæ¨¡å¼ï¼šä»ç¬¬ä¸€ä¸ªäººå¼€å§‹
                startClassicLoop(0);
            } else {
                // æ¥é¾™æ¨¡å¼ (è¿™é‡Œç®€åŒ–ä¸ºï¼šç¬¬ä¸€ä¸ªäººç”»ï¼Œç¬¬äºŒä¸ªäººçŒœï¼Œè½®æµ)
                // å®é™…ä¸ºäº†ç®€å•ï¼šæˆ¿ä¸»å‡ºé¢˜ -> P1ç”» -> P2çŒœ(ä¸”ç”») -> P3çŒœ...
                // ç°ç‰ˆæœ¬ç®€åŒ–é€»è¾‘ï¼šæˆ¿ä¸»æ§åˆ¶ï¼Œæ‰‹åŠ¨å¼€å§‹ä¸‹ä¸€è½®
                alert("æ¥é¾™æ¨¡å¼å³å°†å¼€å§‹ï¼è¯·æŒ‰é¡ºåºæ¥åŠ›ï¼");
                startClassicLoop(0); // æš‚æ—¶å¤ç”¨é€»è¾‘ï¼Œåç»­å¯æ‰©å±•
            }
        }

        // ç«é€Ÿæ¨¡å¼å¾ªç¯
        let roundIdx = -1;
        function nextRoundClassic() {
            startClassicLoop((roundIdx + 1) % players.length);
        }

        function startClassicLoop(idx) {
            roundIdx = idx;
            drawerId = players[idx].id;
            currentWord = WORDS[Math.floor(Math.random() * WORDS.length)];
            
            // å¹¿æ’­å›åˆå¼€å§‹
            broadcast({
                type: 'ROUND_START',
                drawerId: drawerId,
                word: currentWord // æ³¨æ„ï¼šå®¢æˆ·ç«¯æ”¶åˆ°åï¼Œå¦‚æœä¸æ˜¯ç”»å¸ˆï¼Œè¦éšè—è¿™ä¸ªè¯
            });
        }

        // UIå“åº”å›åˆå¼€å§‹
        function startRoundUI(data) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawerId = data.drawerId;
            renderPlayerList();
            
            const isMe = (myId === drawerId);
            const overlay = document.getElementById('wordOverlay');
            const toolBar = document.getElementById('toolBar');
            const inputArea = document.getElementById('guessInputArea');

            if (isMe) {
                // æˆ‘æ˜¯ç”»å¸ˆ
                overlay.style.display = 'flex';
                document.getElementById('overlayText').innerText = `ä½ è¦ç”»çš„æ˜¯ï¼š${data.word}\n(ç‚¹å‡»å¼€å§‹)`;
                document.getElementById('hostControls').style.display = 'none';
                
                // ç‚¹å‡»é®ç½©å¼€å§‹ä½œç”»
                overlay.onclick = () => {
                    overlay.style.display = 'none';
                    toolBar.style.display = 'flex';
                    inputArea.style.display = 'none'; // ç”»å¸ˆä¸èƒ½çŒœ
                    overlay.onclick = null;
                };
            } else {
                // æˆ‘æ˜¯çŒœé¢˜è€…
                overlay.style.display = 'none';
                toolBar.style.display = 'none';
                inputArea.style.display = 'flex';
                document.getElementById('statusText').innerText = `æ­£åœ¨ç”»ç”»: ${players.find(p=>p.id===drawerId).name}`;
            }
        }

        // ================= 4. ç”»æ¿é€»è¾‘ =================
        let painting = false;
        let currentColor = '#000000';
        let lastX = 0, lastY = 0;

        function initCanvasEvents() {
            // é¼ æ ‡
            canvas.onmousedown = (e) => startDraw(e.offsetX, e.offsetY);
            canvas.onmousemove = (e) => moveDraw(e.offsetX, e.offsetY);
            canvas.onmouseup = endDraw;
            
            // è§¦æ‘¸ (æ‰‹æœº)
            canvas.ontouchstart = (e) => {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                startDraw(e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top);
            };
            canvas.ontouchmove = (e) => {
                e.preventDefault();
                const rect = canvas.getBoundingClientRect();
                moveDraw(e.touches[0].clientX - rect.left, e.touches[0].clientY - rect.top);
            };
            canvas.ontouchend = endDraw;
        }

        function startDraw(x, y) {
            if (myId !== drawerId) return;
            painting = true;
            lastX = x; lastY = y;
        }

        function moveDraw(x, y) {
            if (!painting) return;
            // å‘é€ç›¸å¯¹åæ ‡ (0-1)ï¼Œé€‚é…ä¸åŒå±å¹•
            const w = canvas.width;
            const h = canvas.height;
            
            const drawData = {
                type: 'DRAW_DATA',
                x1: lastX / w, y1: lastY / h,
                x2: x / w, y2: y / h,
                color: currentColor
            };
            
            drawOnCanvas(drawData); // è‡ªå·±ç”»
            
            // å‘é€ç»™æˆ¿ä¸»(æˆ–å¹¿æ’­)
            if(isHost) broadcast(drawData);
            else hostConn.send(drawData);

            lastX = x; lastY = y;
        }

        function endDraw() { painting = false; }

        function drawOnCanvas(data) {
            const w = canvas.width;
            const h = canvas.height;
            ctx.beginPath();
            ctx.moveTo(data.x1 * w, data.y1 * h);
            ctx.lineTo(data.x2 * w, data.y2 * h);
            ctx.strokeStyle = data.color;
            ctx.lineWidth = data.color === '#ffffff' ? 20 : 3; // æ©¡çš®æ“¦ç²—ä¸€ç‚¹
            ctx.lineCap = 'round';
            ctx.stroke();
        }

        function setColor(c) { currentColor = c; }
        function clearCanvas(send) {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            if(send) {
                if(isHost) broadcast({type:'CLEAR_CANVAS'});
                else hostConn.send({type:'CLEAR_CANVAS'});
            }
        }

        // ================= 5. èŠå¤©ä¸è¾…åŠ© =================
        function sendGuess() {
            const ipt = document.getElementById('guessInput');
            const val = ipt.value.trim();
            if(!val) return;
            
            // å‘é€çŒœè¯è¯·æ±‚
            const msg = { type: 'GUESS', name: myName, content: val, from: myId };
            if(isHost) handleData(msg); // æˆ¿ä¸»è‡ªäº§è‡ªé”€
            else hostConn.send(msg);
            
            ipt.value = '';
        }

        function addLog(name, text, type='') {
            const list = document.getElementById('chatList');
            const div = document.createElement('div');
            div.className = `chat-msg ${type}`;
            div.innerText = `${name}: ${text}`;
            list.appendChild(div);
            list.scrollTop = list.scrollHeight;
        }

        function renderPlayerList() {
            const list = document.getElementById('playerList');
            list.innerHTML = '';
            players.forEach(p => {
                let div = document.createElement('div');
                div.className = `player-card ${p.id === drawerId ? 'drawer' : ''}`;
                div.innerHTML = `
                    <div class="p-avatar">ğŸ§¸</div>
                    <div class="p-name">${p.name}</div>
                    <div class="p-score">${p.score}</div>
                `;
                list.appendChild(div);
            });
        }

        function copyId() {
            navigator.clipboard.writeText(myId).then(()=>alert('æˆ¿å·å·²å¤åˆ¶'));
        }
    </script>
</body>
</html>
